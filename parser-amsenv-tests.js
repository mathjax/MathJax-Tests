// Testing environments with AMS labelling to contrast regular and starred
// environments.
import {ParserTest} from './parser-tests.js';
import {TagsFactory} from 'mathjax3/input/tex/Tags.js';

class ParserAmsenvTest extends ParserTest {

  constructor() {
    super();
    this.settings = {tags: 'AMS'};
  }

}

let parserTest = new ParserAmsenvTest();

parserTest.runTest(
  'Subarray', '\\begin{subarray}{c}a\\end{subarray}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mstyle",
         "texClass": 0,
         "attributes": {"scriptlevel": 1},
         "inherited": {"displaystyle": true},
         "properties": {},
         "childNodes": [
           {"kind": "mrow",
            "texClass": 0,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 1},
            "properties": {},
            "childNodes": [
              {"kind": "mtable",
               "texClass": 0,
               "attributes": {"rowspacing": "0.1em",
                              "columnspacing": "0em"},
               "inherited": {"scriptlevel": 1},
               "properties": {"useHeight": false},
               "childNodes": [
                 {"kind": "mtr",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                                "rowalign": "baseline",
                                "displaystyle": false,
                                "scriptlevel": 1},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtd",
                     "texClass": null,
                     "attributes": {},
                     "inherited": {"columnalign": "center",
                                   "rowalign": "baseline",
                                   "displaystyle": false,
                                   "scriptlevel": 1},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mrow",
                        "texClass": 0,
                        "attributes": {},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mi",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1,
                                         "mathvariant": "italic"},
                           "properties": {},
                           "childNodes": [
                             {"kind": "text",
                              "text": "a"}]}],
                        "isInferred": true}]}]}]}],
            "isInferred": true}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Small Matrix', '\\begin{smallmatrix}a\\end{smallmatrix}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mstyle",
         "texClass": 0,
         "attributes": {"scriptlevel": 1},
         "inherited": {"displaystyle": true},
         "properties": {},
         "childNodes": [
           {"kind": "mrow",
            "texClass": 0,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 1},
            "properties": {},
            "childNodes": [
              {"kind": "mtable",
               "texClass": 0,
               "attributes": {"rowspacing": ".2em",
                              "columnspacing": "0.333em"},
               "inherited": {"scriptlevel": 1},
               "properties": {"useHeight": false},
               "childNodes": [
                 {"kind": "mtr",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                                "rowalign": "baseline",
                                "displaystyle": false,
                                "scriptlevel": 1},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtd",
                     "texClass": null,
                     "attributes": {},
                     "inherited": {"columnalign": "center",
                                   "rowalign": "baseline",
                                   "displaystyle": false,
                                   "scriptlevel": 1},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mrow",
                        "texClass": 0,
                        "attributes": {},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mi",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1,
                                         "mathvariant": "italic"},
                           "properties": {},
                           "childNodes": [
                             {"kind": "text",
                              "text": "a"}]}],
                        "isInferred": true}]}]}]}],
            "isInferred": true}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Align', '\\begin{align} a&=b \\\\ c&=d \\end{align}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnalign": "right left right left right left right left right left right left",
                        "rowspacing": "3pt",
                        "columnspacing": "0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mlabeledtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "right left right left right left right left right left right left",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {"id": "mjx-eqn-1"},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtext",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "(1)"}],
                     "isSpacelike": true}],
                  "isInferred": true,
                  "isSpacelike": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "a"}]}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "left",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": []},
                    {"kind": "mo",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                            "form": "infix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "b"}]}],
                      "isInferred": true}]}]},
            {"kind": "mlabeledtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "right left right left right left right left right left right left",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {"id": "mjx-eqn-2"},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mtext",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "(2)"}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "c"}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "left",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": []},
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "d"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Align Star', '\\begin{align*} a&=b \\\\ c&=d \\end{align*}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnalign": "right left right left right left right left right left right left",
                        "rowspacing": "3pt",
                        "columnspacing": "0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "right left right left right left right left right left right left",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "a"}]}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "left",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": []},
                    {"kind": "mo",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "form": "infix"},
                     "properties": {},
                     "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "b"}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "right left right left right left right left right left right left",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "c"}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "left",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": []},
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "d"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Multline', '\\begin{multline} a\\\\ b \\\\ c \\end{multline}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnwidth": "100%",
                        "width": "85%",
                        "rowspacing": ".5em",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {"columnalign": "left"},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "a"}]}],
                  "isInferred": true}]}]},
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "b"}]}],
                      "isInferred": true}]}]},
            {"kind": "mlabeledtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {"id": "mjx-eqn-1"},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mtext",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "(1)"}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {"columnalign": "right"},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "c"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Multline Star', '\\begin{multline*} a\\\\ b \\\\ c \\end{multline*}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnwidth": "100%",
                        "width": "85%",
                        "rowspacing": ".5em",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {"columnalign": "left"},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "a"}]}],
                  "isInferred": true}]}]},
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "b"}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {"columnalign": "right"},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "c"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Split', '\\begin{align*} a&=b \\begin{split} r&=s\\\\ & =t \\end{split} \\\\ c&=d \\end{align*}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnalign": "right left right left right left right left right left right left",
                        "rowspacing": "3pt",
                        "columnspacing": "0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "right left right left right left right left right left right left",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "a"}]}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "left",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": []},
                    {"kind": "mo",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "form": "infix"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "="}],
                     "isEmbellished": true},
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "b"}]},
                    {"kind": "mtable",
                     "texClass": 0,
                     "attributes": {"columnalign": "right left",
                                    "rowspacing": "3pt",
                                    "columnspacing": "0em",
                                    "displaystyle": true},
                     "inherited": {"columnalign": "left",
                                   "rowalign": "baseline",
                                   "scriptlevel": 0},
                     "properties": {"useHeight": 1},
                     "childNodes": [
                       {"kind": "mtr",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"columnalign": "right left",
                                      "rowalign": "baseline",
                                      "displaystyle": true,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {},
                           "inherited": {"columnalign": "right",
                                         "rowalign": "baseline",
                                         "displaystyle": true,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                            "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mi",
                                 "texClass": 0,
                                 "attributes": {},
                                 "inherited": {"displaystyle": true,
                                               "scriptlevel": 0,
                                               "mathvariant": "italic"},
                                 "properties": {},
                                 "childNodes": [
                                            {"kind": "text",
                                              "text": "r"}]}],
                                      "isInferred": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "left",
                                    "rowalign": "baseline",
                                    "displaystyle": true,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": true,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0},
                                          "properties": {},
                                          "childNodes": []},
                                        {"kind": "mo",
                                          "texClass": 3,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "form": "infix"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "="}],
                                          "isEmbellished": true},
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "mathvariant": "italic"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "s"}]}],
                                      "isInferred": true}]}]},
                            {"kind": "mtr",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"columnalign": "right left",
                                "rowalign": "baseline",
                                "displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "right",
                                    "rowalign": "baseline",
                                    "displaystyle": true,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": null,
                                      "attributes": {},
                                      "inherited": {"displaystyle": true,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "left",
                                    "rowalign": "baseline",
                                    "displaystyle": true,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": true,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0},
                                          "properties": {},
                                          "childNodes": []},
                                        {"kind": "mo",
                                          "texClass": 3,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "form": "infix"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "="}],
                                          "isEmbellished": true},
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "mathvariant": "italic"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "t"}]}],
                                      "isInferred": true}]}]}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "right left right left right left right left right left right left",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "c"}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "left",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": []},
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "d"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Gather', '\\begin{gather} a=b \\\\ c=d \\end{gather}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"rowspacing": "3pt",
                        "columnspacing": "1em",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mlabeledtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {"id": "mjx-eqn-1"},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtext",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "(1)"}],
                     "isSpacelike": true}],
                  "isInferred": true,
                  "isSpacelike": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "a"}]},
                    {"kind": "mo",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "form": "infix"},
                     "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "b"}]}],
                      "isInferred": true}]}]},
            {"kind": "mlabeledtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {"id": "mjx-eqn-2"},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mtext",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "(2)"}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "c"}]},
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "d"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Gather Star', '\\begin{gather*} a=b \\\\ c=d \\end{gather*}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"rowspacing": "3pt",
                        "columnspacing": "1em",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "a"}]},
                    {"kind": "mo",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "form": "infix"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "="}],
                     "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "b"}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "c"}]},
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "d"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Alignat', '\\begin{alignat}{2} a&=b \\\\ c&=d \\end{alignat}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnalign": "right left right left",
                        "rowspacing": "3pt",
                        "columnspacing": "0em 0em 0em 0em",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mlabeledtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "right left right left",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {"id": "mjx-eqn-1"},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtext",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "(1)"}],
                     "isSpacelike": true}],
                  "isInferred": true,
                  "isSpacelike": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "a"}]}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "left",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": []},
                    {"kind": "mo",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "b"}]}],
                      "isInferred": true}]}]},
            {"kind": "mlabeledtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "right left right left",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {"id": "mjx-eqn-2"},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mtext",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "(2)"}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "c"}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "left",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": []},
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "d"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Alignat Star', '\\begin{alignat*}{2} a&=b \\\\ c&=d \\end{alignat*}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnalign": "right left right left",
                        "rowspacing": "3pt",
                        "columnspacing": "0em 0em 0em 0em",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "right left right left",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "a"}]}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "left",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": []},
                    {"kind": "mo",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "form": "infix"},
                     "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "b"}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "right left right left",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "c"}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "left",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": []},
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "d"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Alignedat', '\\begin{align*} a&=b \\begin{alignedat}{2} r&=s\\\\ & =t \\end{alignedat} \\\\ c&=d \\end{align*}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnalign": "right left right left right left right left right left right left",
                        "rowspacing": "3pt",
                        "columnspacing": "0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "right left right left right left right left right left right left",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "a"}]}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "left",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": []},
                    {"kind": "mo",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "form": "infix"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "="}],
                     "isEmbellished": true},
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "b"}]},
                    {"kind": "mtable",
                     "texClass": 0,
                     "attributes": {"columnalign": "right left right left",
                                    "rowspacing": "3pt",
                                    "columnspacing": "0em 0em 0em 0em",
                                    "displaystyle": true},
                     "inherited": {"columnalign": "left",
                                   "rowalign": "baseline",
                                   "scriptlevel": 0},
                     "properties": {"useHeight": 1},
                     "childNodes": [
                       {"kind": "mtr",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"columnalign": "right left right left",
                                      "rowalign": "baseline",
                                      "displaystyle": true,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {},
                           "inherited": {"columnalign": "right",
                                         "rowalign": "baseline",
                                         "displaystyle": true,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                            "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mi",
                                 "texClass": 0,
                                 "attributes": {},
                                 "inherited": {"displaystyle": true,
                                               "scriptlevel": 0,
                                               "mathvariant": "italic"},
                                 "properties": {},
                                 "childNodes": [
                                   {"kind": "text",
                                              "text": "r"}]}],
                                      "isInferred": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "left",
                                    "rowalign": "baseline",
                                    "displaystyle": true,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": true,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0},
                                          "properties": {},
                                          "childNodes": []},
                                        {"kind": "mo",
                                          "texClass": 3,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "form": "infix"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "="}],
                                          "isEmbellished": true},
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "mathvariant": "italic"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "s"}]}],
                                      "isInferred": true}]}]},
                            {"kind": "mtr",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"columnalign": "right left right left",
                                "rowalign": "baseline",
                                "displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "right",
                                    "rowalign": "baseline",
                                    "displaystyle": true,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": null,
                                      "attributes": {},
                                      "inherited": {"displaystyle": true,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "left",
                                    "rowalign": "baseline",
                                    "displaystyle": true,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": true,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0},
                                          "properties": {},
                                          "childNodes": []},
                                        {"kind": "mo",
                                          "texClass": 3,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "form": "infix"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "="}],
                                          "isEmbellished": true},
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "mathvariant": "italic"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "t"}]}],
                                      "isInferred": true}]}]}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "right left right left right left right left right left right left",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "c"}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "left",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": []},
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "d"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Aligned', '\\begin{align*} a&=b \\begin{aligned} r&=s\\\\ & =t \\end{aligned} \\\\ c&=d \\end{align*}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnalign": "right left right left right left right left right left right left",
                        "rowspacing": "3pt",
                        "columnspacing": "0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "right left right left right left right left right left right left",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "a"}]}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "left",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": []},
                    {"kind": "mo",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "form": "infix"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "="}],
                     "isEmbellished": true},
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "b"}]},
                    {"kind": "mtable",
                     "texClass": 0,
                     "attributes": {"columnalign": "right left right left right left right left right left right left",
                                    "rowspacing": "3pt",
                                    "columnspacing": "0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em",
                                    "displaystyle": true},
                     "inherited": {"columnalign": "left",
                                   "rowalign": "baseline",
                                   "scriptlevel": 0},
                     "properties": {"useHeight": 1},
                     "childNodes": [
                       {"kind": "mtr",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"columnalign": "right left right left right left right left right left right left",
                                      "rowalign": "baseline",
                                      "displaystyle": true,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {},
                           "inherited": {"columnalign": "right",
                                         "rowalign": "baseline",
                                         "displaystyle": true,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                            "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mi",
                                 "texClass": 0,
                                 "attributes": {},
                                 "inherited": {"displaystyle": true,
                                               "scriptlevel": 0,
                                               "mathvariant": "italic"},
                                 "properties": {},
                                 "childNodes": [
                                   {"kind": "text",
                                              "text": "r"}]}],
                                      "isInferred": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "left",
                                    "rowalign": "baseline",
                                    "displaystyle": true,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": true,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0},
                                          "properties": {},
                                          "childNodes": []},
                                        {"kind": "mo",
                                          "texClass": 3,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "form": "infix"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "="}],
                                          "isEmbellished": true},
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "mathvariant": "italic"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "s"}]}],
                                      "isInferred": true}]}]},
                            {"kind": "mtr",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"columnalign": "right left right left right left right left right left right left",
                                "rowalign": "baseline",
                                "displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "right",
                                    "rowalign": "baseline",
                                    "displaystyle": true,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": null,
                                      "attributes": {},
                                      "inherited": {"displaystyle": true,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "left",
                                    "rowalign": "baseline",
                                    "displaystyle": true,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": true,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0},
                                          "properties": {},
                                          "childNodes": []},
                                        {"kind": "mo",
                                          "texClass": 3,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "form": "infix"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "="}],
                                          "isEmbellished": true},
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "mathvariant": "italic"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "t"}]}],
                                      "isInferred": true}]}]}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "right left right left right left right left right left right left",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "c"}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "left",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": []},
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "d"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Gathered', '\\begin{align*} a&=b \\begin{gathered} r=s\\\\  =t \\end{gathered} \\\\ c&=d \\end{align*}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnalign": "right left right left right left right left right left right left",
                        "rowspacing": "3pt",
                        "columnspacing": "0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "right left right left right left right left right left right left",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "a"}]}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "left",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": []},
                    {"kind": "mo",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "form": "infix"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "="}],
                     "isEmbellished": true},
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "b"}]},
                    {"kind": "mtable",
                     "texClass": 0,
                     "attributes": {"rowspacing": "3pt",
                                    "columnalign": "center",
                                    "columnspacing": "1em",
                                    "displaystyle": true},
                     "inherited": {"columnalign": "left",
                                   "rowalign": "baseline",
                                   "scriptlevel": 0},
                     "properties": {"useHeight": 1},
                     "childNodes": [
                       {"kind": "mtr",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"columnalign": "center",
                                      "rowalign": "baseline",
                                      "displaystyle": true,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": true,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": true,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "mathvariant": "italic"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "r"}]},
                                        {"kind": "mo",
                                          "texClass": 3,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "form": "infix"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "="}],
                                          "isEmbellished": true},
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "mathvariant": "italic"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "s"}]}],
                                      "isInferred": true}]}]},
                            {"kind": "mtr",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"columnalign": "center",
                                "rowalign": "baseline",
                                "displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": true,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 3,
                                      "attributes": {},
                                      "inherited": {"displaystyle": true,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mo",
                                          "texClass": 3,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "form": "prefix"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "="}],
                                          "isEmbellished": true},
                                        {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": true,
                                            "scriptlevel": 0,
                                            "mathvariant": "italic"},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "text",
                                              "text": "t"}]}],
                                      "isInferred": true}]}]}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "right left right left right left right left right left right left",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "c"}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "left",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": []},
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "d"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Equation', '\\begin{equation} a \\end{equation}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mlabeledtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {"id": "mjx-eqn-1"},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtext",
                     "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "(1)"}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "a"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Equation Star', '\\begin{equation*} a \\end{equation*}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mi",
         "texClass": 0,
         "attributes": {},
         "inherited": {"displaystyle": true,
            "scriptlevel": 0,
            "mathvariant": "italic"},
          "properties": {},
          "childNodes": [
            {"kind": "text",
              "text": "a"}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Eqnarray', '\\begin{eqnarray} a & = & b\\\\ c & = & d \\end{eqnarray}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnalign": "right center left",
                        "rowspacing": "3pt",
                        "columnspacing": "0 thickmathspace",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mlabeledtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "right center left",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {"id": "mjx-eqn-1"},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtext",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "(1)"}],
                     "isSpacelike": true}],
                  "isInferred": true,
                  "isSpacelike": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "a"}]}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": []},
                    {"kind": "mo",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "form": "postfix"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "="}],
                     "isEmbellished": true}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "left",
                             "rowalign": "baseline",
                             "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "b"}]}],
                      "isInferred": true}]}]},
            {"kind": "mlabeledtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "right center left",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {"id": "mjx-eqn-2"},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mtext",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "(2)"}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "c"}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": []},
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "postfix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "left",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "d"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Eqnarray Star', '\\begin{eqnarray*} a & = & b\\\\ c & = & d \\end{eqnarray*}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnalign": "right center left",
                        "rowspacing": "3pt",
                        "columnspacing": "0 thickmathspace",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "right center left",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "right",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "a"}]}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": []},
                    {"kind": "mo",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "form": "postfix"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "="}],
                     "isEmbellished": true}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "left",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "b"}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "right center left",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "right",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "c"}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": []},
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "postfix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "left",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "d"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.printTime();
