import {ParserTest} from './parser-tests.js';
import 'mathjax3/input/tex/braket/BraketConfiguration.js';


class ParserBraketTest extends ParserTest {

  constructor() {
    super();
    this.packages = ['base', 'braket'];
  }

}

let parserTest = new ParserBraketTest();

parserTest.runTest(
  'Braket-bra', '\\bra{x}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "TeXAtom",
         "texClass": 0,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {},
         "childNodes": [
           {"kind": "mrow",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mo",
               "texClass": 4,
               "attributes": {"fence": false,
                              "stretchy": false},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0,
                             "form": "prefix",
                             "fence": true,
                             "stretchy": true,
                             "symmetric": true},
               "properties": {},
               "childNodes": [
                 {"kind": "text",
                  "text": "⟨"}],
               "isEmbellished": true},
              {"kind": "TeXAtom",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "x"}]}],
                      "isInferred": true}]},
                {"kind": "mo",
                  "texClass": 0,
                  "attributes": {"fence": false,
                    "stretchy": false},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "form": "postfix",
                    "fence": true,
                    "stretchy": true,
                    "symmetric": true},
                  "properties": {"texClass": 0},
                  "childNodes": [
                    {"kind": "text",
                      "text": "|"}],
                  "isEmbellished": true}],
              "isInferred": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-bra-large', '\\bra{\\frac{x}{y}}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "TeXAtom",
         "texClass": 0,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {},
         "childNodes": [
           {"kind": "mrow",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mo",
               "texClass": 4,
               "attributes": {"fence": false,
                              "stretchy": false},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0,
                             "form": "prefix",
                             "fence": true,
                             "stretchy": true,
                             "symmetric": true},
               "properties": {},
               "childNodes": [
                 {"kind": "text",
                  "text": "⟨"}],
               "isEmbellished": true},
              {"kind": "TeXAtom",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                      "childNodes": [
                        {"kind": "mfrac",
                          "texClass": null,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mi",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0,
                                "mathvariant": "italic"},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "x"}]},
                            {"kind": "mi",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0,
                                "mathvariant": "italic"},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "y"}]}]}],
                      "isInferred": true}]},
                {"kind": "mo",
                  "texClass": 0,
                  "attributes": {"fence": false,
                    "stretchy": false},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "form": "postfix",
                    "fence": true,
                    "stretchy": true,
                    "symmetric": true},
                  "properties": {"texClass": 0},
                  "childNodes": [
                    {"kind": "text",
                      "text": "|"}],
                  "isEmbellished": true}],
              "isInferred": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-Bra', '\\Bra{\\frac{x}{y}}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "TeXAtom",
         "texClass": 0,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {},
         "childNodes": [
           {"kind": "mrow",
            "texClass": 7,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mrow",
               "texClass": 7,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {"open": "⟨",
                              "close": "|",
                              "texClass": 7},
               "childNodes": [
                 {"kind": "mo",
                  "texClass": 4,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "prefix",
                                "fence": true,
                                "stretchy": true,
                                "symmetric": true},
                  "properties": {"texClass": 4},
                  "childNodes": [
                    {"kind": "text",
                     "text": "⟨"}],
                  "isEmbellished": true},
                 {"kind": "TeXAtom",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": null,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mfrac",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mi",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0,
                                    "mathvariant": "italic"},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "text",
                                      "text": "x"}]},
                                {"kind": "mi",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0,
                                    "mathvariant": "italic"},
                                  "properties": {"texprimestyle": true},
                                  "childNodes": [
                                    {"kind": "text",
                                      "text": "y"}]}]}],
                          "isInferred": true}]},
                    {"kind": "mo",
                      "texClass": 5,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0,
                        "form": "postfix",
                        "fence": true,
                        "stretchy": true,
                        "symmetric": true},
                      "properties": {"texClass": 5},
                      "childNodes": [
                        {"kind": "text",
                          "text": "|"}],
                      "isEmbellished": true}]}],
              "isInferred": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-ket', '\\ket{x}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "TeXAtom",
         "texClass": 0,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {},
         "childNodes": [
           {"kind": "mrow",
            "texClass": 0,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mo",
               "texClass": 0,
               "attributes": {"fence": false,
                              "stretchy": false},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0,
                             "form": "prefix",
                             "fence": true,
                             "stretchy": true,
                             "symmetric": true},
               "properties": {"texClass": 0},
               "childNodes": [
                 {"kind": "text",
                  "text": "|"}],
               "isEmbellished": true},
              {"kind": "TeXAtom",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "x"}]}],
                      "isInferred": true}]},
                {"kind": "mo",
                  "texClass": 5,
                  "attributes": {"fence": false,
                    "stretchy": false},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "form": "postfix",
                    "fence": true,
                    "stretchy": true,
                    "symmetric": true},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "⟩"}],
                  "isEmbellished": true}],
              "isInferred": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-ket-large', '\\ket{\\frac{x}{y}}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "TeXAtom",
         "texClass": 0,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {},
         "childNodes": [
           {"kind": "mrow",
            "texClass": 0,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mo",
               "texClass": 0,
               "attributes": {"fence": false,
                              "stretchy": false},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0,
                             "form": "prefix",
                             "fence": true,
                             "stretchy": true,
                             "symmetric": true},
               "properties": {"texClass": 0},
               "childNodes": [
                 {"kind": "text",
                  "text": "|"}],
               "isEmbellished": true},
              {"kind": "TeXAtom",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mfrac",
                          "texClass": null,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mi",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0,
                                "mathvariant": "italic"},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "x"}]},
                            {"kind": "mi",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0,
                                "mathvariant": "italic"},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "y"}]}]}],
                      "isInferred": true}]},
                {"kind": "mo",
                  "texClass": 5,
                  "attributes": {"fence": false,
                    "stretchy": false},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "form": "postfix",
                    "fence": true,
                    "stretchy": true,
                    "symmetric": true},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "⟩"}],
                  "isEmbellished": true}],
              "isInferred": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-Ket', '\\Ket{\\frac{x}{y}}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "TeXAtom",
         "texClass": 0,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {},
         "childNodes": [
           {"kind": "mrow",
            "texClass": 7,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mrow",
               "texClass": 7,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {"open": "|",
                              "close": "⟩",
                              "texClass": 7},
               "childNodes": [
                 {"kind": "mo",
                  "texClass": 4,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "prefix",
                                "fence": true,
                                "stretchy": true,
                                "symmetric": true},
                  "properties": {"texClass": 4},
                  "childNodes": [
                    {"kind": "text",
                     "text": "|"}],
                  "isEmbellished": true},
                 {"kind": "TeXAtom",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": null,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mfrac",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mi",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0,
                                    "mathvariant": "italic"},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "text",
                                      "text": "x"}]},
                                {"kind": "mi",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0,
                                    "mathvariant": "italic"},
                                  "properties": {"texprimestyle": true},
                                  "childNodes": [
                                    {"kind": "text",
                                      "text": "y"}]}]}],
                          "isInferred": true}]},
                    {"kind": "mo",
                      "texClass": 5,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0,
                        "form": "postfix",
                        "fence": true,
                        "stretchy": true,
                        "symmetric": true},
                      "properties": {"texClass": 5},
                      "childNodes": [
                        {"kind": "text",
                          "text": "⟩"}],
                      "isEmbellished": true}]}],
              "isInferred": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-braket', '\\braket{x}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "⟨",
                        "close": "⟩",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {"stretchy": false},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "⟨"}],
            "isEmbellished": true},
           {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "x"}]},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {"stretchy": false},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "⟩"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-braket-large', '\\braket{\\frac{x}{y}}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "⟨",
                        "close": "⟩",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {"stretchy": false},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "⟨"}],
            "isEmbellished": true},
           {"kind": "mfrac",
            "texClass": null,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                    "scriptlevel": 0,
                    "mathvariant": "italic"},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "x"}]},
                {"kind": "mi",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                    "scriptlevel": 0,
                    "mathvariant": "italic"},
                  "properties": {"texprimestyle": true},
                  "childNodes": [
                    {"kind": "text",
                      "text": "y"}]}]},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {"stretchy": false},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "⟩"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-Braket', '\\Braket{\\frac{x}{y}}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "⟨",
                        "close": "⟩",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "⟨"}],
            "isEmbellished": true},
           {"kind": "mfrac",
            "texClass": null,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
                  "inherited": {"displaystyle": false,
                    "scriptlevel": 0,
                    "mathvariant": "italic"},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "x"}]},
                {"kind": "mi",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                    "scriptlevel": 0,
                    "mathvariant": "italic"},
                  "properties": {"texprimestyle": true},
                  "childNodes": [
                    {"kind": "text",
                      "text": "y"}]}]},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "⟩"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-ketbra', '\\ketbra{x}{y}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "TeXAtom",
         "texClass": 0,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {},
         "childNodes": [
           {"kind": "mrow",
            "texClass": 0,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mo",
               "texClass": 0,
               "attributes": {"fence": false,
                              "stretchy": false},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0,
                             "form": "prefix",
                             "fence": true,
                             "stretchy": true,
                             "symmetric": true},
               "properties": {"texClass": 0},
               "childNodes": [
                 {"kind": "text",
                  "text": "|"}],
               "isEmbellished": true},
              {"kind": "TeXAtom",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "x"}]}],
                  "isInferred": true}]},
              {"kind": "mo",
               "texClass": 5,
               "attributes": {"fence": false,
                    "stretchy": false},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "form": "infix",
                    "fence": true,
                    "stretchy": true,
                    "symmetric": true},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "⟩"}],
                  "isEmbellished": true},
                {"kind": "mo",
                  "texClass": 4,
                  "attributes": {"fence": false,
                    "stretchy": false},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "form": "infix",
                    "fence": true,
                    "stretchy": true,
                    "symmetric": true},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "⟨"}],
                  "isEmbellished": true},
                {"kind": "TeXAtom",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "y"}]}],
                      "isInferred": true}]},
                {"kind": "mo",
                  "texClass": 0,
                  "attributes": {"fence": false,
                    "stretchy": false},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "form": "postfix",
                    "fence": true,
                    "stretchy": true,
                    "symmetric": true},
                  "properties": {"texClass": 0},
                  "childNodes": [
                    {"kind": "text",
                      "text": "|"}],
                  "isEmbellished": true}],
              "isInferred": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-ketbra-large', '\\ketbra{\\frac{x}{y}}{z}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "TeXAtom",
         "texClass": 0,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {},
         "childNodes": [
           {"kind": "mrow",
            "texClass": 0,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mo",
               "texClass": 0,
               "attributes": {"fence": false,
                              "stretchy": false},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0,
                             "form": "prefix",
                             "fence": true,
                             "stretchy": true,
                             "symmetric": true},
               "properties": {"texClass": 0},
               "childNodes": [
                 {"kind": "text",
                  "text": "|"}],
               "isEmbellished": true},
              {"kind": "TeXAtom",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mfrac",
                     "texClass": null,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mi",
                        "texClass": 0,
                        "attributes": {},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 0,
                                      "mathvariant": "italic"},
                        "properties": {},
                        "childNodes": [
                          {"kind": "text",
                           "text": "x"}]},
                       {"kind": "mi",
                        "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0,
                                "mathvariant": "italic"},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "y"}]}]}],
                      "isInferred": true}]},
                {"kind": "mo",
                  "texClass": 5,
                  "attributes": {"fence": false,
                    "stretchy": false},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "form": "infix",
                    "fence": true,
                    "stretchy": true,
                    "symmetric": true},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "⟩"}],
                  "isEmbellished": true},
                {"kind": "mo",
                  "texClass": 4,
                  "attributes": {"fence": false,
                    "stretchy": false},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "form": "infix",
                    "fence": true,
                    "stretchy": true,
                    "symmetric": true},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "⟨"}],
                  "isEmbellished": true},
                {"kind": "TeXAtom",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "z"}]}],
                      "isInferred": true}]},
                {"kind": "mo",
                  "texClass": 0,
                  "attributes": {"fence": false,
                    "stretchy": false},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "form": "postfix",
                    "fence": true,
                    "stretchy": true,
                    "symmetric": true},
                  "properties": {"texClass": 0},
                  "childNodes": [
                    {"kind": "text",
                      "text": "|"}],
                  "isEmbellished": true}],
              "isInferred": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-Ketbra', '\\Ketbra{\\frac{x}{y}}{z}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "TeXAtom",
         "texClass": 0,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {},
         "childNodes": [
           {"kind": "mrow",
            "texClass": 7,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mrow",
               "texClass": 7,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {"open": "|",
                              "close": "⟩",
                              "texClass": 7},
               "childNodes": [
                 {"kind": "mo",
                  "texClass": 4,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "prefix",
                                "fence": true,
                                "stretchy": true,
                                "symmetric": true},
                  "properties": {"texClass": 4},
                  "childNodes": [
                    {"kind": "text",
                     "text": "|"}],
                  "isEmbellished": true},
                 {"kind": "TeXAtom",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": null,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mfrac",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mi",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 0,
                                         "mathvariant": "italic"},
                           "properties": {},
                                  "childNodes": [
                                    {"kind": "text",
                                      "text": "x"}]},
                                {"kind": "mi",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0,
                                    "mathvariant": "italic"},
                                  "properties": {"texprimestyle": true},
                                  "childNodes": [
                                    {"kind": "text",
                                      "text": "y"}]}]}],
                          "isInferred": true}]},
                    {"kind": "mo",
                      "texClass": 5,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0,
                        "form": "postfix",
                        "fence": true,
                        "stretchy": true,
                        "symmetric": true},
                      "properties": {"texClass": 5},
                      "childNodes": [
                        {"kind": "text",
                          "text": "⟩"}],
                      "isEmbellished": true}]},
                {"kind": "mrow",
                  "texClass": 4,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {"open": "⟨",
                    "close": "|",
                    "texClass": 7},
                  "childNodes": [
                    {"kind": "mo",
                      "texClass": 4,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0,
                        "form": "prefix",
                        "fence": true,
                        "stretchy": true,
                        "symmetric": true},
                      "properties": {"texClass": 4},
                      "childNodes": [
                        {"kind": "text",
                          "text": "⟨"}],
                      "isEmbellished": true},
                    {"kind": "TeXAtom",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mi",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "mathvariant": "italic"},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "z"}]}],
                          "isInferred": true}]},
                    {"kind": "mo",
                      "texClass": 5,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0,
                        "form": "postfix",
                        "fence": true,
                        "stretchy": true,
                        "symmetric": true},
                      "properties": {"texClass": 5},
                      "childNodes": [
                        {"kind": "text",
                          "text": "|"}],
                      "isEmbellished": true}]}],
              "isInferred": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-Set', '\\Set{x}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "{",
                        "close": "}",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "{"}],
            "isEmbellished": true},
           {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "x"}]},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "}"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-Set-large', '\\Set{\\frac{x}{y}}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "{",
                        "close": "}",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "{"}],
            "isEmbellished": true},
           {"kind": "mfrac",
            "texClass": null,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
                  "inherited": {"displaystyle": false,
                    "scriptlevel": 0,
                    "mathvariant": "italic"},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "x"}]},
                {"kind": "mi",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                    "scriptlevel": 0,
                    "mathvariant": "italic"},
                  "properties": {"texprimestyle": true},
                  "childNodes": [
                    {"kind": "text",
                      "text": "y"}]}]},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "}"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-Set-Bar', '\\Set{x|\\frac{x}{y}}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "{",
                        "close": "}",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "{"}],
            "isEmbellished": true},
           {"kind": "mi",
            "texClass": 0,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "mathvariant": "italic"},
            "properties": {},
            "childNodes": [
              {"kind": "text",
               "text": "x"}]},
           {"kind": "TeXAtom",
            "texClass": 5,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 5},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [],
               "isInferred": true,
               "isSpacelike": true}]},
           {"kind": "mo",
            "texClass": 0,
            "attributes": {"braketbar": true},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "infix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {},
            "childNodes": [
              {"kind": "text",
               "text": "|"}],
              "isEmbellished": true},
            {"kind": "TeXAtom",
              "texClass": 4,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 4},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mfrac",
              "texClass": null,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mi",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                    "scriptlevel": 0,
                    "mathvariant": "italic"},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "x"}]},
                {"kind": "mi",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                    "scriptlevel": 0,
                    "mathvariant": "italic"},
                  "properties": {"texprimestyle": true},
                  "childNodes": [
                    {"kind": "text",
                      "text": "y"}]}]},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "}"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-bar-small', '\\braket{x|y}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "⟨",
                        "close": "⟩",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {"stretchy": false},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "⟨"}],
            "isEmbellished": true},
           {"kind": "mrow",
            "texClass": 0,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {},
               "childNodes": [
                 {"kind": "text",
                  "text": "x"}]},
                {"kind": "mo",
                  "texClass": 0,
                  "attributes": {"stretchy": false,
                    "braketbar": true},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "form": "infix",
                    "fence": true,
                    "stretchy": true,
                    "symmetric": true},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "|"}],
                  "isEmbellished": true},
                {"kind": "mi",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "mathvariant": "italic"},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "y"}]}],
              "isInferred": true},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {"stretchy": false},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "⟩"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-bar-large', '\\braket{\\frac{x}{y}|z}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "⟨",
                        "close": "⟩",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {"stretchy": false},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "⟨"}],
            "isEmbellished": true},
           {"kind": "mrow",
            "texClass": null,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mfrac",
               "texClass": null,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mi",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                                "scriptlevel": 0,
                                "mathvariant": "italic"},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                     "text": "x"}]},
                    {"kind": "mi",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": false,
                        "scriptlevel": 0,
                        "mathvariant": "italic"},
                      "properties": {"texprimestyle": true},
                      "childNodes": [
                        {"kind": "text",
                          "text": "y"}]}]},
                {"kind": "mo",
                  "texClass": 0,
                  "attributes": {"stretchy": false,
                    "braketbar": true},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "form": "infix",
                    "fence": true,
                    "stretchy": true,
                    "symmetric": true},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "|"}],
                  "isEmbellished": true},
                {"kind": "mi",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "mathvariant": "italic"},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "z"}]}],
              "isInferred": true},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {"stretchy": false},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "⟩"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Braket-Bar', '\\Braket{\\frac{x}{y}|z}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "⟨",
                        "close": "⟩",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "⟨"}],
            "isEmbellished": true},
           {"kind": "mfrac",
            "texClass": null,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {},
               "childNodes": [
                 {"kind": "text",
                  "text": "x"}]},
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {"texprimestyle": true},
               "childNodes": [
                 {"kind": "text",
                  "text": "y"}]}]},
           {"kind": "TeXAtom",
            "texClass": 5,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 5},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mo",
              "texClass": 0,
              "attributes": {"braketbar": true},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "infix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "|"}],
              "isEmbellished": true},
            {"kind": "TeXAtom",
              "texClass": 4,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 4},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "z"}]},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "⟩"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Braket-Bar1', '\\Braket{\\frac{x}{y}||z||y}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "⟨",
                        "close": "⟩",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "⟨"}],
            "isEmbellished": true},
           {"kind": "mfrac",
            "texClass": null,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {},
               "childNodes": [
                 {"kind": "text",
                  "text": "x"}]},
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {"texprimestyle": true},
               "childNodes": [
                 {"kind": "text",
                  "text": "y"}]}]},
           {"kind": "TeXAtom",
            "texClass": 5,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 5},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [],
               "isInferred": true,
               "isSpacelike": true}]},
           {"kind": "mo",
            "texClass": 3,
            "attributes": {"stretchy": true,
                           "braketbar": true},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "infix"},
            "properties": {},
            "childNodes": [
              {"kind": "text",
               "text": "∥"}],
            "isEmbellished": true},
           {"kind": "TeXAtom",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "z"}]},
            {"kind": "TeXAtom",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mo",
              "texClass": 3,
              "attributes": {"stretchy": true,
                "braketbar": true},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "infix"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "∥"}],
              "isEmbellished": true},
            {"kind": "TeXAtom",
              "texClass": 4,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 4},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "y"}]},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "⟩"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Braket-Bar2', '\\Braket{\\frac{x}{y}\\||z||y}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "⟨",
                        "close": "⟩",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "⟨"}],
            "isEmbellished": true},
           {"kind": "mfrac",
            "texClass": null,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {},
               "childNodes": [
                 {"kind": "text",
                  "text": "x"}]},
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {"texprimestyle": true},
               "childNodes": [
                 {"kind": "text",
                  "text": "y"}]}]},
           {"kind": "TeXAtom",
            "texClass": 5,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 5},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [],
               "isInferred": true,
               "isSpacelike": true}]},
           {"kind": "mo",
            "texClass": 3,
            "attributes": {"stretchy": true,
                           "braketbar": true},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "infix"},
            "properties": {},
            "childNodes": [
              {"kind": "text",
               "text": "∥"}],
            "isEmbellished": true},
           {"kind": "TeXAtom",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [],
               "isInferred": true,
               "isSpacelike": true}]},
           {"kind": "TeXAtom",
            "texClass": 5,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 5},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [],
               "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mo",
              "texClass": 0,
              "attributes": {"braketbar": true},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "infix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "|"}],
              "isEmbellished": true},
            {"kind": "TeXAtom",
              "texClass": 4,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 4},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "z"}]},
            {"kind": "TeXAtom",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mo",
              "texClass": 3,
              "attributes": {"stretchy": true,
                "braketbar": true},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "infix"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "∥"}],
              "isEmbellished": true},
            {"kind": "TeXAtom",
              "texClass": 4,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 4},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "y"}]},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "⟩"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Braket-Bar3', '\\Braket{\\frac{x}{y}|||z||y}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "⟨",
                        "close": "⟩",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "⟨"}],
            "isEmbellished": true},
           {"kind": "mfrac",
            "texClass": null,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {},
               "childNodes": [
                 {"kind": "text",
                  "text": "x"}]},
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {"texprimestyle": true},
               "childNodes": [
                 {"kind": "text",
                  "text": "y"}]}]},
           {"kind": "TeXAtom",
            "texClass": 5,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 5},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [],
               "isInferred": true,
               "isSpacelike": true}]},
           {"kind": "mo",
            "texClass": 3,
            "attributes": {"stretchy": true,
                           "braketbar": true},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "infix"},
            "properties": {},
            "childNodes": [
              {"kind": "text",
               "text": "∥"}],
            "isEmbellished": true},
           {"kind": "TeXAtom",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [],
               "isInferred": true,
               "isSpacelike": true}]},
           {"kind": "TeXAtom",
            "texClass": 5,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 5},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [],
               "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mo",
              "texClass": 0,
              "attributes": {"braketbar": true},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "infix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "|"}],
              "isEmbellished": true},
            {"kind": "TeXAtom",
              "texClass": 4,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 4},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "z"}]},
            {"kind": "TeXAtom",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mo",
              "texClass": 3,
              "attributes": {"stretchy": true,
                "braketbar": true},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "infix"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "∥"}],
              "isEmbellished": true},
            {"kind": "TeXAtom",
              "texClass": 4,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 4},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "y"}]},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "⟩"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Braket-Bar4', '\\Braket{\\frac{x}{y}|||z|||y}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "⟨",
                        "close": "⟩",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "⟨"}],
            "isEmbellished": true},
           {"kind": "mfrac",
            "texClass": null,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {},
               "childNodes": [
                 {"kind": "text",
                  "text": "x"}]},
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {"texprimestyle": true},
               "childNodes": [
                 {"kind": "text",
                  "text": "y"}]}]},
           {"kind": "TeXAtom",
            "texClass": 5,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 5},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [],
               "isInferred": true,
               "isSpacelike": true}]},
           {"kind": "mo",
            "texClass": 3,
            "attributes": {"stretchy": true,
                           "braketbar": true},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "infix"},
            "properties": {},
            "childNodes": [
              {"kind": "text",
               "text": "∥"}],
            "isEmbellished": true},
           {"kind": "TeXAtom",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [],
               "isInferred": true,
               "isSpacelike": true}]},
           {"kind": "TeXAtom",
            "texClass": 5,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 5},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [],
               "isInferred": true,
               "isSpacelike": true}]},
           {"kind": "mo",
            "texClass": 0,
            "attributes": {"braketbar": true},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "infix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {},
            "childNodes": [
              {"kind": "text",
               "text": "|"}],
            "isEmbellished": true},
           {"kind": "TeXAtom",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "z"}]},
            {"kind": "TeXAtom",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mo",
              "texClass": 3,
              "attributes": {"stretchy": true,
                "braketbar": true},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "infix"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "∥"}],
              "isEmbellished": true},
            {"kind": "TeXAtom",
              "texClass": 4,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 4},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "TeXAtom",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mo",
              "texClass": 0,
              "attributes": {"braketbar": true},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "infix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "|"}],
              "isEmbellished": true},
            {"kind": "TeXAtom",
              "texClass": 4,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 4},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "y"}]},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "⟩"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Braket-Bar-Set', '\\Set{\\frac{x}{y}||y||z}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "{",
                        "close": "}",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "{"}],
            "isEmbellished": true},
           {"kind": "mfrac",
            "texClass": null,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {},
               "childNodes": [
                 {"kind": "text",
                  "text": "x"}]},
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {"texprimestyle": true},
               "childNodes": [
                 {"kind": "text",
                  "text": "y"}]}]},
           {"kind": "TeXAtom",
            "texClass": 5,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 5},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [],
               "isInferred": true,
               "isSpacelike": true}]},
           {"kind": "mo",
            "texClass": 3,
            "attributes": {"stretchy": true,
                           "braketbar": true},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "infix"},
            "properties": {},
            "childNodes": [
              {"kind": "text",
               "text": "∥"}],
            "isEmbellished": true},
            {"kind": "TeXAtom",
              "texClass": 4,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"texClass": 4},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "y"}]},
            {"kind": "mo",
              "texClass": 0,
              "attributes": {"stretchy": false},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "infix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 0},
              "childNodes": [
                {"kind": "text",
                  "text": "|"}],
              "isEmbellished": true},
            {"kind": "mo",
              "texClass": 0,
              "attributes": {"stretchy": false},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "infix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 0},
              "childNodes": [
                {"kind": "text",
                  "text": "|"}],
              "isEmbellished": true},
            {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "z"}]},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "}"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Braket-Bar-Set2', '\\Set{\\frac{x}{y}\\||y\\||z}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "{",
                        "close": "}",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "{"}],
            "isEmbellished": true},
           {"kind": "mfrac",
            "texClass": null,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {},
               "childNodes": [
                 {"kind": "text",
                  "text": "x"}]},
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {"texprimestyle": true},
               "childNodes": [
                 {"kind": "text",
                  "text": "y"}]}]},
           {"kind": "TeXAtom",
            "texClass": 5,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"texClass": 5},
            "childNodes": [
              {"kind": "mrow",
               "texClass": null,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [],
               "isInferred": true,
               "isSpacelike": true}]},
           {"kind": "mo",
            "texClass": 3,
            "attributes": {"stretchy": true,
                           "braketbar": true},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "infix"},
            "properties": {},
            "childNodes": [
              {"kind": "text",
               "text": "∥"}],
            "isEmbellished": true},
           {"kind": "TeXAtom",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
              "properties": {"texClass": 4},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
            {"kind": "mo",
              "texClass": 0,
              "attributes": {"stretchy": false},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "infix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 0},
              "childNodes": [
                {"kind": "text",
                  "text": "|"}],
              "isEmbellished": true},
            {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "y"}]},
            {"kind": "mo",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "infix"},
              "properties": {"texClass": 0},
              "childNodes": [
                {"kind": "text",
                  "text": "∥"}],
              "isEmbellished": true},
            {"kind": "mo",
              "texClass": 0,
              "attributes": {"stretchy": false},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "infix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 0},
              "childNodes": [
                {"kind": "text",
                  "text": "|"}],
              "isEmbellished": true},
            {"kind": "mi",
              "texClass": 0,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "mathvariant": "italic"},
              "properties": {},
              "childNodes": [
                {"kind": "text",
                  "text": "z"}]},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "}"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Braket-Space', '\\braket {a|b}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "⟨",
                        "close": "⟩",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {"stretchy": false},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "⟨"}],
            "isEmbellished": true},
           {"kind": "mrow",
            "texClass": 0,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {},
               "childNodes": [
                 {"kind": "text",
                  "text": "a"}]},
                {"kind": "mo",
                  "texClass": 0,
                  "attributes": {"stretchy": false,
                    "braketbar": true},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "form": "infix",
                    "fence": true,
                    "stretchy": true,
                    "symmetric": true},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "|"}],
                  "isEmbellished": true},
                {"kind": "mi",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "mathvariant": "italic"},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "b"}]}],
              "isInferred": true},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {"stretchy": false},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "⟩"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Braket-No-Braces-Simple', '\\braket a|b',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "⟨",
                        "close": "⟩",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {"stretchy": false},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "⟨"}],
            "isEmbellished": true},
           {"kind": "mi",
            "texClass": 0,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "mathvariant": "italic"},
            "properties": {},
            "childNodes": [
              {"kind": "text",
               "text": "a"}]},
           {"kind": "mo",
            "texClass": 5,
            "attributes": {"stretchy": false},
            "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "⟩"}],
              "isEmbellished": true}]},
        {"kind": "mo",
          "texClass": 0,
          "attributes": {"stretchy": false},
          "inherited": {"displaystyle": true,
            "scriptlevel": 0,
            "form": "infix",
            "fence": true,
            "stretchy": true,
            "symmetric": true},
          "properties": {"texClass": 0},
          "childNodes": [
            {"kind": "text",
              "text": "|"}],
          "isEmbellished": true},
        {"kind": "mi",
          "texClass": 0,
          "attributes": {},
          "inherited": {"displaystyle": true,
            "scriptlevel": 0,
            "mathvariant": "italic"},
          "properties": {},
          "childNodes": [
            {"kind": "text",
              "text": "b"}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Braket-No-Braces-Complex', '\\braket \\frac{a}{c}|b',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "⟨",
                        "close": "⟩",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {"stretchy": false},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "⟨"}],
            "isEmbellished": true},
           {"kind": "mfrac",
            "texClass": null,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                             "scriptlevel": 0,
                             "mathvariant": "italic"},
               "properties": {},
               "childNodes": [
                 {"kind": "text",
                  "text": "a"}]},
              {"kind": "mi",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": false,
                    "scriptlevel": 0,
                    "mathvariant": "italic"},
                  "properties": {"texprimestyle": true},
                  "childNodes": [
                    {"kind": "text",
                      "text": "c"}]}]},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {"stretchy": false},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "⟩"}],
              "isEmbellished": true}]},
        {"kind": "mo",
          "texClass": 0,
          "attributes": {"stretchy": false},
          "inherited": {"displaystyle": true,
            "scriptlevel": 0,
            "form": "infix",
            "fence": true,
            "stretchy": true,
            "symmetric": true},
          "properties": {"texClass": 0},
          "childNodes": [
            {"kind": "text",
              "text": "|"}],
          "isEmbellished": true},
        {"kind": "mi",
          "texClass": 0,
          "attributes": {},
          "inherited": {"displaystyle": true,
            "scriptlevel": 0,
            "mathvariant": "italic"},
          "properties": {},
          "childNodes": [
            {"kind": "text",
              "text": "b"}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Braket-Nested', '\\braket {\\braket{a|b}c}',
  {"kind": "math",
   "texClass": 7,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 7,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 7,
         "attributes": {},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"open": "⟨",
                        "close": "⟩",
                        "texClass": 7},
         "childNodes": [
           {"kind": "mo",
            "texClass": 4,
            "attributes": {"stretchy": false},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0,
                          "form": "prefix",
                          "fence": true,
                          "stretchy": true,
                          "symmetric": true},
            "properties": {"texClass": 4},
            "childNodes": [
              {"kind": "text",
               "text": "⟨"}],
            "isEmbellished": true},
           {"kind": "mrow",
            "texClass": 4,
            "attributes": {},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mrow",
               "texClass": 4,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {"open": "⟨",
                              "close": "⟩",
                              "texClass": 7},
               "childNodes": [
                 {"kind": "mo",
                  "texClass": 4,
                  "attributes": {"stretchy": false},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "prefix",
                                "fence": true,
                                "stretchy": true,
                                "symmetric": true},
                  "properties": {"texClass": 4},
                  "childNodes": [
                    {"kind": "text",
                     "text": "⟨"}],
                  "isEmbellished": true},
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "a"}]},
                        {"kind": "mo",
                          "texClass": 0,
                          "attributes": {"stretchy": false,
                            "braketbar": true},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix",
                            "fence": true,
                            "stretchy": true,
                            "symmetric": true},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "|"}],
                          "isEmbellished": true},
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "b"}]}],
                      "isInferred": true},
                    {"kind": "mo",
                      "texClass": 5,
                      "attributes": {"stretchy": false},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0,
                        "form": "postfix",
                        "fence": true,
                        "stretchy": true,
                        "symmetric": true},
                      "properties": {"texClass": 5},
                      "childNodes": [
                        {"kind": "text",
                          "text": "⟩"}],
                      "isEmbellished": true}]},
                {"kind": "mi",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0,
                    "mathvariant": "italic"},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "c"}]}],
              "isInferred": true},
            {"kind": "mo",
              "texClass": 5,
              "attributes": {"stretchy": false},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0,
                "form": "postfix",
                "fence": true,
                "stretchy": true,
                "symmetric": true},
              "properties": {"texClass": 5},
              "childNodes": [
                {"kind": "text",
                  "text": "⟩"}],
              "isEmbellished": true}]}],
      "isInferred": true}]}
);
