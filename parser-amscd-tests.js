import {ParserTest} from './parser-tests.js';
import 'mathjax3/input/tex/ams_cd/AmsCdConfiguration.js';

class ParserAmsCDTest extends ParserTest {

  constructor() {
    super();
    this.packages = ['base', 'amsCd'];
  }

}

let parserTest = new ParserAmsCDTest();


parserTest.runTest(
  'AmsCD-1', '\\begin{CD}' +
    'A @>a>> B\\\\' +
    '@VVbV @VVcV\\\\' +
    'C @>d>> D' +
    '\\end{CD}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnspacing": "5pt",
                        "rowspacing": "5pt",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "A"}]},
                    {"kind": "mpadded",
                     "texClass": null,
                     "attributes": {"height": "8.5pt",
                                    "depth": "2pt"},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mrow",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [],
                        "isInferred": true,
                        "isSpacelike": true}],
                     "isSpacelike": true}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mover",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "2.75em"},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "infix",
                                      "accent": true,
                                      "stretchy": true},
                        "properties": {"texprimestyle": true},
                        "childNodes": [
                          {"kind": "text",
                           "text": "→"}],
                        "isEmbellished": true},
                       {"kind": "mpadded",
                        "texClass": 0,
                        "attributes": {"width": "+11mu",
                                       "lspace": "6mu",
                                       "voffset": ".1em"},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mi",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1,
                                            "mathvariant": "italic"},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                 "text": "a"}]}],
                           "isInferred": true}]}],
                     "isEmbellished": true}],
                  "isInferred": true,
                  "isEmbellished": true}],
               "isEmbellished": true},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "B"}]}],
                  "isInferred": true}]}]},
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "1.75em",
                                       "symmetric": true,
                                       "lspace": 0,
                                       "rspace": 0},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "prefix",
                                      "stretchy": true},
                        "properties": {},
                        "childNodes": [
                          {"kind": "text",
                           "text": "↓"}],
                        "isEmbellished": true},
                       {"kind": "mstyle",
                        "texClass": 0,
                        "attributes": {"displaystyle": false,
                                       "scriptlevel": 1},
                        "inherited": {},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                                    {"kind": "TeXAtom",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mpadded",
                                              "texClass": 0,
                                              "attributes": {"width": 0},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 1},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 1},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mi",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1,
                                                        "mathvariant": "italic"},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "b"}]}],
                                                  "isInferred": true}]}],
                                          "isInferred": true}]}],
                                  "isInferred": true}]}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "1.75em",
                                "symmetric": true,
                                "lspace": 0,
                                "rspace": 0},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "prefix",
                                "stretchy": true},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "↓"}],
                              "isEmbellished": true},
                            {"kind": "mstyle",
                              "texClass": 0,
                              "attributes": {"displaystyle": false,
                                "scriptlevel": 1},
                              "inherited": {},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "TeXAtom",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mpadded",
                                              "texClass": 0,
                                              "attributes": {"width": 0},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 1},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 1},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mi",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1,
                                                        "mathvariant": "italic"},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "c"}]}],
                                                  "isInferred": true}]}],
                                          "isInferred": true}]}],
                                  "isInferred": true}]}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "C"}]},
                        {"kind": "mpadded",
                          "texClass": null,
                          "attributes": {"height": "8.5pt",
                            "depth": "2pt"},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mover",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "2.75em"},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "infix",
                                "accent": true,
                                "stretchy": true},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "→"}],
                              "isEmbellished": true},
                            {"kind": "mpadded",
                              "texClass": 0,
                              "attributes": {"width": "+11mu",
                                "lspace": "6mu",
                                "voffset": ".1em"},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mi",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1,
                                        "mathvariant": "italic"},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "text",
                                          "text": "d"}]}],
                                  "isInferred": true}]}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "D"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'AmsCD-2', '\\begin{CD}' +
    'A @<<< B @>>> C\\\\' +
    '@. @| @AAA\\\\' +
    '@. D @= E' +
    '\\end{CD}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnspacing": "5pt",
                        "rowspacing": "5pt",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "A"}]},
                    {"kind": "mpadded",
                     "texClass": null,
                     "attributes": {"height": "8.5pt",
                                    "depth": "2pt"},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mrow",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [],
                        "isInferred": true,
                        "isSpacelike": true}],
                     "isSpacelike": true}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mover",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "2.75em"},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "infix",
                                      "accent": true,
                                      "stretchy": true},
                        "properties": {"texprimestyle": true},
                        "childNodes": [
                          {"kind": "text",
                           "text": "←"}],
                        "isEmbellished": true},
                       {"kind": "mpadded",
                        "texClass": 0,
                        "attributes": {"width": "+11mu",
                                       "lspace": "6mu",
                                       "voffset": ".1em"},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mspace",
                              "texClass": 0,
                              "attributes": {"width": "2.75em"},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [],
                              "isSpacelike": true}],
                           "isInferred": true,
                           "isSpacelike": true}],
                        "isSpacelike": true}],
                     "isEmbellished": true}],
                  "isInferred": true,
                  "isEmbellished": true}],
               "isEmbellished": true},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "B"}]}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mover",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "2.75em"},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "infix",
                                      "accent": true,
                                      "stretchy": true},
                        "properties": {"texprimestyle": true},
                        "childNodes": [
                          {"kind": "text",
                           "text": "→"}],
                        "isEmbellished": true},
                       {"kind": "mpadded",
                        "texClass": 0,
                        "attributes": {"width": "+11mu",
                                       "lspace": "6mu",
                                       "voffset": ".1em"},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mspace",
                              "texClass": 0,
                              "attributes": {"width": "2.75em"},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [],
                              "isSpacelike": true}],
                           "isInferred": true,
                           "isSpacelike": true}],
                              "isSpacelike": true}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "C"}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {"minsize": "1.75em",
                            "stretchy": true,
                            "symmetric": true,
                            "lspace": 0,
                            "rspace": 0},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "∥"}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {"minsize": "1.75em",
                            "symmetric": true,
                            "lspace": 0,
                            "rspace": 0},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix",
                            "stretchy": true},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "↑"}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mpadded",
                          "texClass": null,
                          "attributes": {"height": "8.5pt",
                            "depth": "2pt"},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "D"}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {"minsize": "2.75em",
                            "stretchy": true},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "="}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "E"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'AmsCD-3', '\\begin{CD}' +
    'A @>a>b> B\\\\' +
    '@VlVrV @AlArA\\\\' +
    'C @<a<b< D' +
    '\\end{CD}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnspacing": "5pt",
                        "rowspacing": "5pt",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "A"}]},
                    {"kind": "mpadded",
                     "texClass": null,
                     "attributes": {"height": "8.5pt",
                                    "depth": "2pt"},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mrow",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [],
                        "isInferred": true,
                        "isSpacelike": true}],
                     "isSpacelike": true}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "munderover",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "2.75em"},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "infix",
                                      "accent": true,
                                      "stretchy": true},
                        "properties": {"texprimestyle": true},
                        "childNodes": [
                          {"kind": "text",
                           "text": "→"}],
                        "isEmbellished": true},
                       {"kind": "mpadded",
                        "texClass": 0,
                        "attributes": {"width": "+11mu",
                                       "lspace": "6mu"},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {"texprimestyle": true},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {"texprimestyle": true},
                           "childNodes": [
                             {"kind": "mi",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1,
                                            "mathvariant": "italic"},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                 "text": "b"}]}],
                           "isInferred": true}]},
                       {"kind": "mpadded",
                        "texClass": 0,
                        "attributes": {"width": "+11mu",
                                       "lspace": "6mu",
                                       "voffset": ".1em"},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mi",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1,
                                            "mathvariant": "italic"},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                 "text": "a"}]}],
                           "isInferred": true}]}],
                     "isEmbellished": true}],
                  "isInferred": true,
                  "isEmbellished": true}],
               "isEmbellished": true},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "B"}]}],
                  "isInferred": true}]}]},
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mstyle",
                        "texClass": 0,
                        "attributes": {"displaystyle": false,
                                       "scriptlevel": 1},
                        "inherited": {},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                             {"kind": "TeXAtom",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                 "texClass": 0,
                                 "attributes": {},
                                 "inherited": {"displaystyle": false,
                                               "scriptlevel": 1},
                                 "properties": {},
                                 "childNodes": [
                                   {"kind": "mpadded",
                                    "texClass": 0,
                                    "attributes": {"width": 0,
                                                   "lspace": "-1width"},
                                    "inherited": {"displaystyle": false,
                                                  "scriptlevel": 1},
                                    "properties": {},
                                    "childNodes": [
                                      {"kind": "mrow",
                                       "texClass": 0,
                                       "attributes": {},
                                       "inherited": {"displaystyle": false,
                                                     "scriptlevel": 1},
                                       "properties": {},
                                       "childNodes": [
                                         {"kind": "mi",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1,
                                                        "mathvariant": "italic"},
                                          "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "l"}]}],
                                                  "isInferred": true}]}],
                                          "isInferred": true}]}],
                                  "isInferred": true}]},
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "1.75em",
                                "symmetric": true,
                                "lspace": 0,
                                "rspace": 0},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "infix",
                                "stretchy": true},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "↓"}],
                              "isEmbellished": true},
                            {"kind": "mstyle",
                              "texClass": 0,
                              "attributes": {"displaystyle": false,
                                "scriptlevel": 1},
                              "inherited": {},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "TeXAtom",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mpadded",
                                              "texClass": 0,
                                              "attributes": {"width": 0},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 1},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 1},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mi",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1,
                                                        "mathvariant": "italic"},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "r"}]}],
                                                  "isInferred": true}]}],
                                          "isInferred": true}]}],
                                  "isInferred": true}]}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mstyle",
                              "texClass": 0,
                              "attributes": {"displaystyle": false,
                                "scriptlevel": 1},
                              "inherited": {},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "TeXAtom",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mpadded",
                                              "texClass": 0,
                                              "attributes": {"width": 0,
                                                "lspace": "-1width"},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 1},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 1},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mi",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1,
                                                        "mathvariant": "italic"},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "l"}]}],
                                                  "isInferred": true}]}],
                                          "isInferred": true}]}],
                                  "isInferred": true}]},
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "1.75em",
                                "symmetric": true,
                                "lspace": 0,
                                "rspace": 0},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "infix",
                                "stretchy": true},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "↑"}],
                              "isEmbellished": true},
                            {"kind": "mstyle",
                              "texClass": 0,
                              "attributes": {"displaystyle": false,
                                "scriptlevel": 1},
                              "inherited": {},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "TeXAtom",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mpadded",
                                              "texClass": 0,
                                              "attributes": {"width": 0},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 1},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 1},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mi",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1,
                                                        "mathvariant": "italic"},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "r"}]}],
                                                  "isInferred": true}]}],
                                          "isInferred": true}]}],
                                  "isInferred": true}]}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "C"}]},
                        {"kind": "mpadded",
                          "texClass": null,
                          "attributes": {"height": "8.5pt",
                            "depth": "2pt"},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "munderover",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "2.75em"},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "infix",
                                "accent": true,
                                "stretchy": true},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "←"}],
                              "isEmbellished": true},
                            {"kind": "mpadded",
                              "texClass": 0,
                              "attributes": {"width": "+11mu",
                                "lspace": "6mu"},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 1},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {"texprimestyle": true},
                                  "childNodes": [
                                    {"kind": "mi",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1,
                                        "mathvariant": "italic"},
                                      "properties": {"texprimestyle": true},
                                      "childNodes": [
                                        {"kind": "text",
                                          "text": "b"}]}],
                                  "isInferred": true}]},
                            {"kind": "mpadded",
                              "texClass": 0,
                              "attributes": {"width": "+11mu",
                                "lspace": "6mu",
                                "voffset": ".1em"},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mi",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1,
                                        "mathvariant": "italic"},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "text",
                                          "text": "a"}]}],
                                  "isInferred": true}]}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "D"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'AmsCD-4', '\\begin{CD}' +
    'A @>>> B@>\\text{very long label}>>C\\\\' +
    '@VVV @VVV @VVV\\\\' +
    'D @>>> E@>>> F' +
    '\\end{CD}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnspacing": "5pt",
                        "rowspacing": "5pt",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "A"}]},
                    {"kind": "mpadded",
                     "texClass": null,
                     "attributes": {"height": "8.5pt",
                                    "depth": "2pt"},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mrow",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [],
                        "isInferred": true,
                        "isSpacelike": true}],
                     "isSpacelike": true}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mover",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "2.75em"},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "infix",
                                      "accent": true,
                                      "stretchy": true},
                        "properties": {"texprimestyle": true},
                        "childNodes": [
                          {"kind": "text",
                           "text": "→"}],
                        "isEmbellished": true},
                       {"kind": "mpadded",
                        "texClass": 0,
                        "attributes": {"width": "+11mu",
                                       "lspace": "6mu",
                                       "voffset": ".1em"},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mspace",
                              "texClass": 0,
                              "attributes": {"width": "2.75em"},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [],
                              "isSpacelike": true}],
                           "isInferred": true,
                           "isSpacelike": true}],
                        "isSpacelike": true}],
                     "isEmbellished": true}],
                  "isInferred": true,
                  "isEmbellished": true}],
               "isEmbellished": true},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "B"}]}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mover",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "2.75em"},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "infix",
                                      "accent": true,
                                      "stretchy": true},
                        "properties": {"texprimestyle": true},
                        "childNodes": [
                          {"kind": "text",
                           "text": "→"}],
                        "isEmbellished": true},
                       {"kind": "mpadded",
                        "texClass": 0,
                        "attributes": {"width": "+11mu",
                                       "lspace": "6mu",
                                       "voffset": ".1em"},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mtext",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                 "text": "very long label"}],
                              "isSpacelike": true}],
                           "isInferred": true,
                           "isSpacelike": true}],
                        "isSpacelike": true}],
                     "isEmbellished": true}],
                  "isInferred": true,
                  "isEmbellished": true}],
               "isEmbellished": true},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "C"}]}],
                  "isInferred": true}]}]},
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {"minsize": "1.75em",
                            "symmetric": true,
                            "lspace": 0,
                            "rspace": 0},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix",
                            "stretchy": true},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "↓"}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {"minsize": "1.75em",
                            "symmetric": true,
                            "lspace": 0,
                            "rspace": 0},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix",
                            "stretchy": true},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "↓"}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {"minsize": "1.75em",
                            "symmetric": true,
                            "lspace": 0,
                            "rspace": 0},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix",
                            "stretchy": true},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "↓"}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "D"}]},
                        {"kind": "mpadded",
                          "texClass": null,
                          "attributes": {"height": "8.5pt",
                            "depth": "2pt"},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mover",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "2.75em"},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "infix",
                                "accent": true,
                                "stretchy": true},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "→"}],
                              "isEmbellished": true},
                            {"kind": "mpadded",
                              "texClass": 0,
                              "attributes": {"width": "+11mu",
                                "lspace": "6mu",
                                "voffset": ".1em"},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mspace",
                                      "texClass": 0,
                                      "attributes": {"width": "2.75em"},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [],
                                      "isSpacelike": true}],
                                  "isInferred": true,
                                  "isSpacelike": true}],
                              "isSpacelike": true}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "E"}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mover",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "2.75em"},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "infix",
                                "accent": true,
                                "stretchy": true},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "→"}],
                              "isEmbellished": true},
                            {"kind": "mpadded",
                              "texClass": 0,
                              "attributes": {"width": "+11mu",
                                "lspace": "6mu",
                                "voffset": ".1em"},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mspace",
                                      "texClass": 0,
                                      "attributes": {"width": "2.75em"},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [],
                                      "isSpacelike": true}],
                                  "isInferred": true,
                                  "isSpacelike": true}],
                              "isSpacelike": true}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "F"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'AmsCD-5', '\\begin{CD}' +
    'A @>>> B @>{\\text{very long label}}>> C \\\\' +
    '@VVV @VVV @VVV \\\\' +
    'D @>>> E @>{\\phantom{\\text{very long label}}}>> F' +
    '\\end{CD}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnspacing": "5pt",
                        "rowspacing": "5pt",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "A"}]},
                    {"kind": "mpadded",
                     "texClass": null,
                     "attributes": {"height": "8.5pt",
                                    "depth": "2pt"},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mrow",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [],
                        "isInferred": true,
                        "isSpacelike": true}],
                     "isSpacelike": true}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mover",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "2.75em"},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "infix",
                                      "accent": true,
                                      "stretchy": true},
                        "properties": {"texprimestyle": true},
                        "childNodes": [
                          {"kind": "text",
                           "text": "→"}],
                        "isEmbellished": true},
                       {"kind": "mpadded",
                        "texClass": 0,
                        "attributes": {"width": "+11mu",
                                       "lspace": "6mu",
                                       "voffset": ".1em"},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mspace",
                              "texClass": 0,
                              "attributes": {"width": "2.75em"},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [],
                              "isSpacelike": true}],
                           "isInferred": true,
                           "isSpacelike": true}],
                        "isSpacelike": true}],
                     "isEmbellished": true}],
                  "isInferred": true,
                  "isEmbellished": true}],
               "isEmbellished": true},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "B"}]}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mover",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "2.75em"},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "infix",
                                      "accent": true,
                                      "stretchy": true},
                        "properties": {"texprimestyle": true},
                        "childNodes": [
                          {"kind": "text",
                           "text": "→"}],
                        "isEmbellished": true},
                       {"kind": "mpadded",
                        "texClass": 0,
                        "attributes": {"width": "+11mu",
                                       "lspace": "6mu",
                                       "voffset": ".1em"},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                             {"kind": "TeXAtom",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                 "texClass": 0,
                                 "attributes": {},
                                 "inherited": {"displaystyle": false,
                                               "scriptlevel": 1},
                                 "properties": {},
                                 "childNodes": [
                                   {"kind": "mtext",
                                    "texClass": 0,
                                    "attributes": {},
                                    "inherited": {"displaystyle": false,
                                                  "scriptlevel": 1},
                                    "properties": {},
                                    "childNodes": [
                                      {"kind": "text",
                                       "text": "very long label"}],
                                    "isSpacelike": true}],
                                 "isInferred": true,
                                 "isSpacelike": true}]}],
                           "isInferred": true}]}],
                     "isEmbellished": true}],
                  "isInferred": true,
                  "isEmbellished": true}],
               "isEmbellished": true},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "C"}]}],
                  "isInferred": true}]}]},
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {"minsize": "1.75em",
                            "symmetric": true,
                            "lspace": 0,
                            "rspace": 0},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix",
                            "stretchy": true},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "↓"}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {"minsize": "1.75em",
                            "symmetric": true,
                            "lspace": 0,
                            "rspace": 0},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix",
                            "stretchy": true},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "↓"}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {"minsize": "1.75em",
                            "symmetric": true,
                            "lspace": 0,
                            "rspace": 0},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix",
                            "stretchy": true},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "↓"}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "D"}]},
                        {"kind": "mpadded",
                          "texClass": null,
                          "attributes": {"height": "8.5pt",
                            "depth": "2pt"},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mover",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "2.75em"},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "infix",
                                "accent": true,
                                "stretchy": true},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "→"}],
                              "isEmbellished": true},
                            {"kind": "mpadded",
                              "texClass": 0,
                              "attributes": {"width": "+11mu",
                                "lspace": "6mu",
                                "voffset": ".1em"},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mspace",
                                      "texClass": 0,
                                      "attributes": {"width": "2.75em"},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [],
                                      "isSpacelike": true}],
                                  "isInferred": true,
                                  "isSpacelike": true}],
                              "isSpacelike": true}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "E"}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mover",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "2.75em"},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "infix",
                                "accent": true,
                                "stretchy": true},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "→"}],
                              "isEmbellished": true},
                            {"kind": "mpadded",
                              "texClass": 0,
                              "attributes": {"width": "+11mu",
                                "lspace": "6mu",
                                "voffset": ".1em"},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "TeXAtom",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "TeXAtom",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 1},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 1},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mphantom",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "mrow",
                                                          "texClass": 0,
                                                          "attributes": {},
                                                          "inherited": {"displaystyle": false,
                                                            "scriptlevel": 1},
                                                          "properties": {},
                                                          "childNodes": [
                                                            {"kind": "mtext",
                                                              "texClass": 0,
                                                              "attributes": {},
                                                              "inherited": {"displaystyle": false,
                                                                "scriptlevel": 1},
                                                              "properties": {},
                                                              "childNodes": [
                                                                {"kind": "text",
                                                                  "text": "very long label"}],
                                                              "isSpacelike": true}],
                                                          "isInferred": true,
                                                          "isSpacelike": true}],
                                                      "isSpacelike": true}],
                                                  "isInferred": true,
                                                  "isSpacelike": true}]}],
                                          "isInferred": true}]}],
                                  "isInferred": true}]}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "F"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'AmsCD-6', '\\begin{CD}' +
    'A @>>> B @>{\\text{very long label}}>> C \\\\' +
    '@VVV @VVV @VVV \\\\' +
    'D @>>> E @>{\\rlap{\\scriptstyle{\\ \\ \\ \\text{shorter}}}\\phantom{\\text{very long label}}}>> F' +
    '\\end{CD}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnspacing": "5pt",
                        "rowspacing": "5pt",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "A"}]},
                    {"kind": "mpadded",
                     "texClass": null,
                     "attributes": {"height": "8.5pt",
                                    "depth": "2pt"},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mrow",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [],
                        "isInferred": true,
                        "isSpacelike": true}],
                     "isSpacelike": true}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mover",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "2.75em"},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "infix",
                                      "accent": true,
                                      "stretchy": true},
                        "properties": {"texprimestyle": true},
                        "childNodes": [
                          {"kind": "text",
                           "text": "→"}],
                        "isEmbellished": true},
                       {"kind": "mpadded",
                        "texClass": 0,
                        "attributes": {"width": "+11mu",
                                       "lspace": "6mu",
                                       "voffset": ".1em"},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mspace",
                              "texClass": 0,
                              "attributes": {"width": "2.75em"},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [],
                              "isSpacelike": true}],
                           "isInferred": true,
                           "isSpacelike": true}],
                        "isSpacelike": true}],
                     "isEmbellished": true}],
                  "isInferred": true,
                  "isEmbellished": true}],
               "isEmbellished": true},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "B"}]}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mover",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "2.75em"},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "infix",
                                      "accent": true,
                                      "stretchy": true},
                        "properties": {"texprimestyle": true},
                        "childNodes": [
                          {"kind": "text",
                           "text": "→"}],
                        "isEmbellished": true},
                       {"kind": "mpadded",
                        "texClass": 0,
                        "attributes": {"width": "+11mu",
                                       "lspace": "6mu",
                                       "voffset": ".1em"},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                             {"kind": "TeXAtom",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                 "texClass": 0,
                                 "attributes": {},
                                 "inherited": {"displaystyle": false,
                                               "scriptlevel": 1},
                                 "properties": {},
                                 "childNodes": [
                                   {"kind": "mtext",
                                    "texClass": 0,
                                    "attributes": {},
                                    "inherited": {"displaystyle": false,
                                                  "scriptlevel": 1},
                                    "properties": {},
                                    "childNodes": [
                                      {"kind": "text",
                                       "text": "very long label"}],
                                    "isSpacelike": true}],
                                 "isInferred": true,
                                 "isSpacelike": true}]}],
                           "isInferred": true}]}],
                     "isEmbellished": true}],
                  "isInferred": true,
                  "isEmbellished": true}],
               "isEmbellished": true},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "C"}]}],
                  "isInferred": true}]}]},
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mo",
                     "texClass": 3,
                     "attributes": {"minsize": "1.75em",
                                    "symmetric": true,
                                    "lspace": 0,
                                    "rspace": 0},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "form": "infix",
                                   "stretchy": true},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "↓"}],
                     "isEmbellished": true}],
                  "isInferred": true,
                  "isEmbellished": true}],
               "isEmbellished": true},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [],
                  "isInferred": true,
                  "isSpacelike": true}]},
              {"kind": "mtd",
               "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {"minsize": "1.75em",
                            "symmetric": true,
                            "lspace": 0,
                            "rspace": 0},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix",
                            "stretchy": true},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "↓"}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mo",
                          "texClass": 3,
                          "attributes": {"minsize": "1.75em",
                            "symmetric": true,
                            "lspace": 0,
                            "rspace": 0},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "form": "infix",
                            "stretchy": true},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "↓"}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "D"}]},
                        {"kind": "mpadded",
                          "texClass": null,
                          "attributes": {"height": "8.5pt",
                            "depth": "2pt"},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mover",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "2.75em"},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "infix",
                                "accent": true,
                                "stretchy": true},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "→"}],
                              "isEmbellished": true},
                            {"kind": "mpadded",
                              "texClass": 0,
                              "attributes": {"width": "+11mu",
                                "lspace": "6mu",
                                "voffset": ".1em"},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mspace",
                                      "texClass": 0,
                                      "attributes": {"width": "2.75em"},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [],
                                      "isSpacelike": true}],
                                  "isInferred": true,
                                  "isSpacelike": true}],
                              "isSpacelike": true}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "E"}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mover",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "2.75em"},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "infix",
                                "accent": true,
                                "stretchy": true},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "→"}],
                              "isEmbellished": true},
                            {"kind": "mpadded",
                              "texClass": 0,
                              "attributes": {"width": "+11mu",
                                "lspace": "6mu",
                                "voffset": ".1em"},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "TeXAtom",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "TeXAtom",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 1},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 1},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mpadded",
                                                      "texClass": 0,
                                                      "attributes": {"width": 0},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "mrow",
                                                          "texClass": 0,
                                                          "attributes": {},
                                                          "inherited": {"displaystyle": false,
                                                            "scriptlevel": 1},
                                                          "properties": {},
                                                          "childNodes": [
                                                            {"kind": "mstyle",
                                                              "texClass": 0,
                                                              "attributes": {"displaystyle": false,
                                                                "scriptlevel": 1},
                                                              "inherited": {},
                                                              "properties": {},
                                                              "childNodes": [
                                                                {"kind": "mrow",
                                                                  "texClass": 0,
                                                                  "attributes": {},
                                                                  "inherited": {"displaystyle": false,
                                                                    "scriptlevel": 1},
                                                                  "properties": {},
                                                                  "childNodes": [
                                                                    {"kind": "TeXAtom",
                                                                      "texClass": 0,
                                                                      "attributes": {},
                                                                      "inherited": {"displaystyle": false,
                                                                        "scriptlevel": 1},
                                                                      "properties": {},
                                                                      "childNodes": [
                                                                        {"kind": "mrow",
                                                                          "texClass": 0,
                                                                          "attributes": {},
                                                                          "inherited": {"displaystyle": false,
                                                                            "scriptlevel": 1},
                                                                          "properties": {},
                                                                          "childNodes": [
                                                                            {"kind": "mtext",
                                                                              "texClass": 0,
                                                                              "attributes": {},
                                                                              "inherited": {"displaystyle": false,
                                                                                "scriptlevel": 1},
                                                                              "properties": {},
                                                                              "childNodes": [
                                                                                {"kind": "text",
                                                                                  "text": " "}],
                                                                              "isSpacelike": true},
                                                                            {"kind": "mtext",
                                                                              "texClass": 0,
                                                                              "attributes": {},
                                                                              "inherited": {"displaystyle": false,
                                                                                "scriptlevel": 1},
                                                                              "properties": {},
                                                                              "childNodes": [
                                                                                {"kind": "text",
                                                                                  "text": " "}],
                                                                              "isSpacelike": true},
                                                                            {"kind": "mtext",
                                                                              "texClass": 0,
                                                                              "attributes": {},
                                                                              "inherited": {"displaystyle": false,
                                                                                "scriptlevel": 1},
                                                                              "properties": {},
                                                                              "childNodes": [
                                                                                {"kind": "text",
                                                                                  "text": " "}],
                                                                              "isSpacelike": true},
                                                                            {"kind": "mtext",
                                                                              "texClass": 0,
                                                                              "attributes": {},
                                                                              "inherited": {"displaystyle": false,
                                                                                "scriptlevel": 1},
                                                                              "properties": {},
                                                                              "childNodes": [
                                                                                {"kind": "text",
                                                                                  "text": "shorter"}],
                                                                              "isSpacelike": true}],
                                                                          "isInferred": true,
                                                                          "isSpacelike": true}]}],
                                                                  "isInferred": true}]}],
                                                          "isInferred": true}]}],
                                                  "isInferred": true}]},
                                            {"kind": "TeXAtom",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 1},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 1},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mphantom",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "mrow",
                                                          "texClass": 0,
                                                          "attributes": {},
                                                          "inherited": {"displaystyle": false,
                                                            "scriptlevel": 1},
                                                          "properties": {},
                                                          "childNodes": [
                                                            {"kind": "mtext",
                                                              "texClass": 0,
                                                              "attributes": {},
                                                              "inherited": {"displaystyle": false,
                                                                "scriptlevel": 1},
                                                              "properties": {},
                                                              "childNodes": [
                                                                {"kind": "text",
                                                                  "text": "very long label"}],
                                                              "isSpacelike": true}],
                                                          "isInferred": true,
                                                          "isSpacelike": true}],
                                                      "isSpacelike": true}],
                                                  "isInferred": true,
                                                  "isSpacelike": true}]}],
                                          "isInferred": true}]}],
                                  "isInferred": true}]}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "F"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'AmsCD-width', '\\minCDarrowwidth{5cm}\\begin{CD}A @>a>> B\\\\@VVbV @VVcV\\\\C @>d>> D\\end{CD}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnspacing": "5pt",
                        "rowspacing": "5pt",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "A"}]},
                    {"kind": "mpadded",
                     "texClass": null,
                     "attributes": {"height": "8.5pt",
                                    "depth": "2pt"},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mrow",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [],
                        "isInferred": true,
                        "isSpacelike": true}],
                     "isSpacelike": true}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mover",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "5cm"},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "infix",
                                      "accent": true,
                                      "stretchy": true},
                        "properties": {"texprimestyle": true},
                        "childNodes": [
                          {"kind": "text",
                           "text": "→"}],
                        "isEmbellished": true},
                       {"kind": "mpadded",
                        "texClass": 0,
                        "attributes": {"width": "+11mu",
                                       "lspace": "6mu",
                                       "voffset": ".1em"},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mi",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1,
                                            "mathvariant": "italic"},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                 "text": "a"}]}],
                           "isInferred": true}]}],
                     "isEmbellished": true}],
                  "isInferred": true,
                  "isEmbellished": true}],
               "isEmbellished": true},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "B"}]}],
                  "isInferred": true}]}]},
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "1.75em",
                                       "symmetric": true,
                                       "lspace": 0,
                                       "rspace": 0},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "prefix",
                                      "stretchy": true},
                        "properties": {},
                        "childNodes": [
                          {"kind": "text",
                           "text": "↓"}],
                        "isEmbellished": true},
                       {"kind": "mstyle",
                        "texClass": 0,
                        "attributes": {"displaystyle": false,
                                       "scriptlevel": 1},
                        "inherited": {},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                                    {"kind": "TeXAtom",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mpadded",
                                              "texClass": 0,
                                              "attributes": {"width": 0},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 1},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 1},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mi",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1,
                                                        "mathvariant": "italic"},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "b"}]}],
                                                  "isInferred": true}]}],
                                          "isInferred": true}]}],
                                  "isInferred": true}]}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "1.75em",
                                "symmetric": true,
                                "lspace": 0,
                                "rspace": 0},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "prefix",
                                "stretchy": true},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "↓"}],
                              "isEmbellished": true},
                            {"kind": "mstyle",
                              "texClass": 0,
                              "attributes": {"displaystyle": false,
                                "scriptlevel": 1},
                              "inherited": {},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "TeXAtom",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mpadded",
                                              "texClass": 0,
                                              "attributes": {"width": 0},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 1},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 1},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mi",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1,
                                                        "mathvariant": "italic"},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "c"}]}],
                                                  "isInferred": true}]}],
                                          "isInferred": true}]}],
                                  "isInferred": true}]}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "C"}]},
                        {"kind": "mpadded",
                          "texClass": null,
                          "attributes": {"height": "8.5pt",
                            "depth": "2pt"},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mover",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "5cm"},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "infix",
                                "accent": true,
                                "stretchy": true},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "→"}],
                              "isEmbellished": true},
                            {"kind": "mpadded",
                              "texClass": 0,
                              "attributes": {"width": "+11mu",
                                "lspace": "6mu",
                                "voffset": ".1em"},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mi",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1,
                                        "mathvariant": "italic"},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "text",
                                          "text": "d"}]}],
                                  "isInferred": true}]}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "D"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'AmsCD-height', '\\minCDarrowheight{4cm}\\begin{CD}A @>a>> B\\\\@VVbV @VVcV\\\\C @>d>> D\\end{CD}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnspacing": "5pt",
                        "rowspacing": "5pt",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "A"}]},
                    {"kind": "mpadded",
                     "texClass": null,
                     "attributes": {"height": "8.5pt",
                                    "depth": "2pt"},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mrow",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [],
                        "isInferred": true,
                        "isSpacelike": true}],
                     "isSpacelike": true}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mover",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "2.75em"},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "infix",
                                      "accent": true,
                                      "stretchy": true},
                        "properties": {"texprimestyle": true},
                        "childNodes": [
                          {"kind": "text",
                           "text": "→"}],
                        "isEmbellished": true},
                       {"kind": "mpadded",
                        "texClass": 0,
                        "attributes": {"width": "+11mu",
                                       "lspace": "6mu",
                                       "voffset": ".1em"},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mi",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1,
                                            "mathvariant": "italic"},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                 "text": "a"}]}],
                           "isInferred": true}]}],
                     "isEmbellished": true}],
                  "isInferred": true,
                  "isEmbellished": true}],
               "isEmbellished": true},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "B"}]}],
                  "isInferred": true}]}]},
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "4cm",
                                       "symmetric": true,
                                       "lspace": 0,
                                       "rspace": 0},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "prefix",
                                      "stretchy": true},
                        "properties": {},
                        "childNodes": [
                          {"kind": "text",
                           "text": "↓"}],
                        "isEmbellished": true},
                       {"kind": "mstyle",
                        "texClass": 0,
                        "attributes": {"displaystyle": false,
                                       "scriptlevel": 1},
                        "inherited": {},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                                    {"kind": "TeXAtom",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mpadded",
                                              "texClass": 0,
                                              "attributes": {"width": 0},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 1},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 1},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mi",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1,
                                                        "mathvariant": "italic"},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "b"}]}],
                                                  "isInferred": true}]}],
                                          "isInferred": true}]}],
                                  "isInferred": true}]}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "4cm",
                                "symmetric": true,
                                "lspace": 0,
                                "rspace": 0},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "prefix",
                                "stretchy": true},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "↓"}],
                              "isEmbellished": true},
                            {"kind": "mstyle",
                              "texClass": 0,
                              "attributes": {"displaystyle": false,
                                "scriptlevel": 1},
                              "inherited": {},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "TeXAtom",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mpadded",
                                              "texClass": 0,
                                              "attributes": {"width": 0},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 1},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 1},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mi",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1,
                                                        "mathvariant": "italic"},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "c"}]}],
                                                  "isInferred": true}]}],
                                          "isInferred": true}]}],
                                  "isInferred": true}]}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "C"}]},
                        {"kind": "mpadded",
                          "texClass": null,
                          "attributes": {"height": "8.5pt",
                            "depth": "2pt"},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mover",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "2.75em"},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "infix",
                                "accent": true,
                                "stretchy": true},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "→"}],
                              "isEmbellished": true},
                            {"kind": "mpadded",
                              "texClass": 0,
                              "attributes": {"width": "+11mu",
                                "lspace": "6mu",
                                "voffset": ".1em"},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mi",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1,
                                        "mathvariant": "italic"},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "text",
                                          "text": "d"}]}],
                                  "isInferred": true}]}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "D"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'AmsCD-both', '\\minCDarrowheight{4cm}\\minCDarrowwidth{5cm}\\begin{CD}A @>a>> B\\\\@VVbV @VVcV\\\\C @>d>> D\\end{CD}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"columnspacing": "5pt",
                        "rowspacing": "5pt",
                        "displaystyle": true},
         "inherited": {"scriptlevel": 0},
         "properties": {"useHeight": 1},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "A"}]},
                    {"kind": "mpadded",
                     "texClass": null,
                     "attributes": {"height": "8.5pt",
                                    "depth": "2pt"},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mrow",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [],
                        "isInferred": true,
                        "isSpacelike": true}],
                     "isSpacelike": true}],
                  "isInferred": true}]},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mover",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "5cm"},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "infix",
                                      "accent": true,
                                      "stretchy": true},
                        "properties": {"texprimestyle": true},
                        "childNodes": [
                          {"kind": "text",
                           "text": "→"}],
                        "isEmbellished": true},
                       {"kind": "mpadded",
                        "texClass": 0,
                        "attributes": {"width": "+11mu",
                                       "lspace": "6mu",
                                       "voffset": ".1em"},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 1},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mi",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 1,
                                            "mathvariant": "italic"},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                 "text": "a"}]}],
                           "isInferred": true}]}],
                     "isEmbellished": true}],
                  "isInferred": true,
                  "isEmbellished": true}],
               "isEmbellished": true},
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mi",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0,
                                   "mathvariant": "italic"},
                     "properties": {},
                     "childNodes": [
                       {"kind": "text",
                        "text": "B"}]}],
                  "isInferred": true}]}]},
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": true,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 3,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 3,
                     "attributes": {},
                     "inherited": {"displaystyle": true,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mo",
                        "texClass": 3,
                        "attributes": {"minsize": "4cm",
                                       "symmetric": true,
                                       "lspace": 0,
                                       "rspace": 0},
                        "inherited": {"displaystyle": true,
                                      "scriptlevel": 0,
                                      "form": "prefix",
                                      "stretchy": true},
                        "properties": {},
                        "childNodes": [
                          {"kind": "text",
                           "text": "↓"}],
                        "isEmbellished": true},
                       {"kind": "mstyle",
                        "texClass": 0,
                        "attributes": {"displaystyle": false,
                                       "scriptlevel": 1},
                        "inherited": {},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mrow",
                           "texClass": 0,
                           "attributes": {},
                           "inherited": {"displaystyle": false,
                                         "scriptlevel": 1},
                           "properties": {},
                           "childNodes": [
                                    {"kind": "TeXAtom",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mpadded",
                                              "texClass": 0,
                                              "attributes": {"width": 0},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 1},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 1},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mi",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1,
                                                        "mathvariant": "italic"},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "b"}]}],
                                                  "isInferred": true}]}],
                                          "isInferred": true}]}],
                                  "isInferred": true}]}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "4cm",
                                "symmetric": true,
                                "lspace": 0,
                                "rspace": 0},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "prefix",
                                "stretchy": true},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "↓"}],
                              "isEmbellished": true},
                            {"kind": "mstyle",
                              "texClass": 0,
                              "attributes": {"displaystyle": false,
                                "scriptlevel": 1},
                              "inherited": {},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "TeXAtom",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 1},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mpadded",
                                              "texClass": 0,
                                              "attributes": {"width": 0},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 1},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 1},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mi",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 1,
                                                        "mathvariant": "italic"},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "c"}]}],
                                                  "isInferred": true}]}],
                                          "isInferred": true}]}],
                                  "isInferred": true}]}]}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [],
                      "isInferred": true,
                      "isSpacelike": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": true,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "C"}]},
                        {"kind": "mpadded",
                          "texClass": null,
                          "attributes": {"height": "8.5pt",
                            "depth": "2pt"},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true}]},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 3,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mover",
                          "texClass": 3,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mo",
                              "texClass": 3,
                              "attributes": {"minsize": "5cm"},
                              "inherited": {"displaystyle": true,
                                "scriptlevel": 0,
                                "form": "infix",
                                "accent": true,
                                "stretchy": true},
                              "properties": {"texprimestyle": true},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "→"}],
                              "isEmbellished": true},
                            {"kind": "mpadded",
                              "texClass": 0,
                              "attributes": {"width": "+11mu",
                                "lspace": "6mu",
                                "voffset": ".1em"},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 1},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 1},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mi",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 1,
                                        "mathvariant": "italic"},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "text",
                                          "text": "d"}]}],
                                  "isInferred": true}]}],
                          "isEmbellished": true}],
                      "isInferred": true,
                      "isEmbellished": true}],
                  "isEmbellished": true},
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": true,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mi",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": true,
                            "scriptlevel": 0,
                            "mathvariant": "italic"},
                          "properties": {},
                          "childNodes": [
                            {"kind": "text",
                              "text": "D"}]}],
                      "isInferred": true}]}]}]}],
      "isInferred": true}]}
);
