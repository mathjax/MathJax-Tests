import {ParserTest} from './parser-tests.js';
import 'mathjax3/input/tex/bussproofs/BussproofsConfiguration.js';

class ParserBussproofsRegInfTest extends ParserTest {

  constructor() {
    super();
    this.packages = ['base', 'ams', 'bussproofs'];
  }

}

let parserTest = new ParserBussproofsRegInfTest();

// Regular inferences
parserTest.runTest(
  'Single Axiom', '\\begin{prooftree}\\AxiomC{A}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mstyle",
         "texClass": 0,
         "attributes": {"displaystyle": false,
                        "scriptlevel": 0,
                        "semantics": "bspr_proof:true"},
         "inherited": {},
         "properties": {"bspr_proof": true},
         "childNodes": [
           {"kind": "mrow",
            "texClass": 0,
            "attributes": {},
            "inherited": {"displaystyle": false,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
                {"kind": "mtext",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "A"}],
                  "isSpacelike": true}],
              "isInferred": true,
              "isSpacelike": true}],
          "isSpacelike": true}],
      "isInferred": true,
      "isSpacelike": true}],
  "isSpacelike": true}
);

parserTest.runTest(
  'Unary Inference', '\\begin{prooftree}\\AxiomC{A}\\UnaryInfC{B}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"align": "top 2",
                        "rowlines": "solid",
                        "framespacing": "0 0",
                        "semantics": "bspr_inferenceRule:down;bspr_inference:1;bspr_proof:true"},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"useHeight": 1,
                        "bspr_inferenceRule": "down",
                        "bspr_inference": 1,
                        "bspr_proof": true},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": false,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": false,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtable",
                     "texClass": 0,
                     "attributes": {"framespacing": "0 0"},
                     "inherited": {"columnalign": "center",
                                   "rowalign": "baseline",
                                   "displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {"useHeight": 1},
                     "childNodes": [
                       {"kind": "mtr",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"columnalign": "center",
                                      "rowalign": "baseline",
                                      "displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {"rowalign": "bottom"},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                              "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mstyle",
                                          "texClass": 0,
                                          "attributes": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "inherited": {},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mrow",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "A"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]}]}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": false,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": false,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mstyle",
                          "texClass": 0,
                          "attributes": {"displaystyle": false,
                            "scriptlevel": 0},
                          "inherited": {},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mtext",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "text",
                                      "text": "B"}],
                                  "isSpacelike": true}],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Binary Inference', '\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\BinaryInfC{C}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"align": "top 2",
                        "rowlines": "solid",
                        "framespacing": "0 0",
                        "semantics": "bspr_inferenceRule:down;bspr_inference:2;bspr_proof:true"},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"useHeight": 1,
                        "bspr_inferenceRule": "down",
                        "bspr_inference": 2,
                        "bspr_proof": true},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": false,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": false,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtable",
                     "texClass": 0,
                     "attributes": {"framespacing": "0 0"},
                     "inherited": {"columnalign": "center",
                                   "rowalign": "baseline",
                                   "displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {"useHeight": 1},
                     "childNodes": [
                       {"kind": "mtr",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"columnalign": "center",
                                      "rowalign": "baseline",
                                      "displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {"rowalign": "bottom"},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mstyle",
                                 "texClass": 0,
                                 "attributes": {"displaystyle": false,
                                                "scriptlevel": 0},
                                 "inherited": {},
                                 "properties": {},
                                 "childNodes": [
                                   {"kind": "mrow",
                                    "texClass": 0,
                                    "attributes": {},
                                    "inherited": {"displaystyle": false,
                                                  "scriptlevel": 0},
                                    "properties": {},
                                    "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "A"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": null,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {"rowalign": "bottom"},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mstyle",
                                          "texClass": 0,
                                          "attributes": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "inherited": {},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mrow",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "B"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]}]}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": false,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": false,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mstyle",
                          "texClass": 0,
                          "attributes": {"displaystyle": false,
                            "scriptlevel": 0},
                          "inherited": {},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mtext",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "text",
                                      "text": "C"}],
                                  "isSpacelike": true}],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Trinary Inference', '\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\AxiomC{C}\\TrinaryInfC{D}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"align": "top 2",
                        "rowlines": "solid",
                        "framespacing": "0 0",
                        "semantics": "bspr_inferenceRule:down;bspr_inference:3;bspr_proof:true"},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"useHeight": 1,
                        "bspr_inferenceRule": "down",
                        "bspr_inference": 3,
                        "bspr_proof": true},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": false,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": false,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtable",
                     "texClass": 0,
                     "attributes": {"framespacing": "0 0"},
                     "inherited": {"columnalign": "center",
                                   "rowalign": "baseline",
                                   "displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {"useHeight": 1},
                     "childNodes": [
                       {"kind": "mtr",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"columnalign": "center",
                                      "rowalign": "baseline",
                                      "displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {"rowalign": "bottom"},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mstyle",
                                 "texClass": 0,
                                 "attributes": {"displaystyle": false,
                                                "scriptlevel": 0},
                                 "inherited": {},
                                 "properties": {},
                                 "childNodes": [
                                   {"kind": "mrow",
                                    "texClass": 0,
                                    "attributes": {},
                                    "inherited": {"displaystyle": false,
                                                  "scriptlevel": 0},
                                    "properties": {},
                                    "childNodes": [
                                      {"kind": "mtext",
                                       "texClass": 0,
                                       "attributes": {},
                                       "inherited": {"displaystyle": false,
                                                     "scriptlevel": 0},
                                       "properties": {},
                                       "childNodes": [
                                         {"kind": "text",
                                          "text": "A"}],
                                       "isSpacelike": true}],
                                    "isInferred": true,
                                    "isSpacelike": true}],
                                 "isSpacelike": true}],
                              "isInferred": true,
                              "isSpacelike": true}]},
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": null,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {"rowalign": "bottom"},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mstyle",
                                          "texClass": 0,
                                          "attributes": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "inherited": {},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mrow",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "B"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": null,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {"rowalign": "bottom"},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mstyle",
                                          "texClass": 0,
                                          "attributes": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "inherited": {},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mrow",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "C"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]}]}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": false,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": false,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mstyle",
                          "texClass": 0,
                          "attributes": {"displaystyle": false,
                            "scriptlevel": 0},
                          "inherited": {},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mtext",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "text",
                                      "text": "D"}],
                                  "isSpacelike": true}],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Quaternary Inference', '\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\AxiomC{C}\\AxiomC{D}\\QuaternaryInfC{E}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"align": "top 2",
                        "rowlines": "solid",
                        "framespacing": "0 0",
                        "semantics": "bspr_inferenceRule:down;bspr_inference:4;bspr_proof:true"},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"useHeight": 1,
                        "bspr_inferenceRule": "down",
                        "bspr_inference": 4,
                        "bspr_proof": true},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": false,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": false,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtable",
                     "texClass": 0,
                     "attributes": {"framespacing": "0 0"},
                     "inherited": {"columnalign": "center",
                                   "rowalign": "baseline",
                                   "displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {"useHeight": 1},
                     "childNodes": [
                       {"kind": "mtr",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"columnalign": "center",
                                      "rowalign": "baseline",
                                      "displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {"rowalign": "bottom"},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mstyle",
                                 "texClass": 0,
                                 "attributes": {"displaystyle": false,
                                                "scriptlevel": 0},
                                 "inherited": {},
                                 "properties": {},
                                 "childNodes": [
                                   {"kind": "mrow",
                                    "texClass": 0,
                                    "attributes": {},
                                    "inherited": {"displaystyle": false,
                                                  "scriptlevel": 0},
                                    "properties": {},
                                    "childNodes": [
                                      {"kind": "mtext",
                                       "texClass": 0,
                                       "attributes": {},
                                       "inherited": {"displaystyle": false,
                                                     "scriptlevel": 0},
                                       "properties": {},
                                       "childNodes": [
                                         {"kind": "text",
                                          "text": "A"}],
                                       "isSpacelike": true}],
                                    "isInferred": true,
                                    "isSpacelike": true}],
                                 "isSpacelike": true}],
                              "isInferred": true,
                              "isSpacelike": true}]},
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [],
                              "isInferred": true,
                              "isSpacelike": true}]},
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {"rowalign": "bottom"},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mstyle",
                                          "texClass": 0,
                                          "attributes": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "inherited": {},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mrow",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "B"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": null,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {"rowalign": "bottom"},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mstyle",
                                          "texClass": 0,
                                          "attributes": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "inherited": {},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mrow",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "C"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": null,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {"rowalign": "bottom"},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mstyle",
                                          "texClass": 0,
                                          "attributes": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "inherited": {},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mrow",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "D"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]}]}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": false,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": false,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mstyle",
                          "texClass": 0,
                          "attributes": {"displaystyle": false,
                            "scriptlevel": 0},
                          "inherited": {},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mtext",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "text",
                                      "text": "E"}],
                                  "isSpacelike": true}],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Quinary Inference', '\\begin{prooftree}\\AxiomC{A}\\AxiomC{B}\\AxiomC{C}\\AxiomC{D}\\AxiomC{E}\\QuinaryInfC{F}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"align": "top 2",
                        "rowlines": "solid",
                        "framespacing": "0 0",
                        "semantics": "bspr_inferenceRule:down;bspr_inference:5;bspr_proof:true"},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"useHeight": 1,
                        "bspr_inferenceRule": "down",
                        "bspr_inference": 5,
                        "bspr_proof": true},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": false,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": false,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtable",
                     "texClass": 0,
                     "attributes": {"framespacing": "0 0"},
                     "inherited": {"columnalign": "center",
                                   "rowalign": "baseline",
                                   "displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {"useHeight": 1},
                     "childNodes": [
                       {"kind": "mtr",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"columnalign": "center",
                                      "rowalign": "baseline",
                                      "displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {"rowalign": "bottom"},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mstyle",
                                 "texClass": 0,
                                 "attributes": {"displaystyle": false,
                                                "scriptlevel": 0},
                                 "inherited": {},
                                 "properties": {},
                                 "childNodes": [
                                   {"kind": "mrow",
                                    "texClass": 0,
                                    "attributes": {},
                                    "inherited": {"displaystyle": false,
                                                  "scriptlevel": 0},
                                    "properties": {},
                                    "childNodes": [
                                      {"kind": "mtext",
                                       "texClass": 0,
                                       "attributes": {},
                                       "inherited": {"displaystyle": false,
                                                     "scriptlevel": 0},
                                       "properties": {},
                                       "childNodes": [
                                         {"kind": "text",
                                          "text": "A"}],
                                       "isSpacelike": true}],
                                    "isInferred": true,
                                    "isSpacelike": true}],
                                 "isSpacelike": true}],
                              "isInferred": true,
                              "isSpacelike": true}]},
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                              "texClass": null,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [],
                              "isInferred": true,
                              "isSpacelike": true}]},
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {"rowalign": "bottom"},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mstyle",
                                 "texClass": 0,
                                 "attributes": {"displaystyle": false,
                                                "scriptlevel": 0},
                                 "inherited": {},
                                 "properties": {},
                                 "childNodes": [
                                   {"kind": "mrow",
                                    "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "B"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": null,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {"rowalign": "bottom"},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mstyle",
                                          "texClass": 0,
                                          "attributes": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "inherited": {},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mrow",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "C"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": null,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {"rowalign": "bottom"},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mstyle",
                                          "texClass": 0,
                                          "attributes": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "inherited": {},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mrow",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "D"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": null,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {"rowalign": "bottom"},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mstyle",
                                          "texClass": 0,
                                          "attributes": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "inherited": {},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mrow",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "E"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]}]}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": false,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": false,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mstyle",
                          "texClass": 0,
                          "attributes": {"displaystyle": false,
                            "scriptlevel": 0},
                          "inherited": {},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mtext",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "text",
                                      "text": "F"}],
                                  "isSpacelike": true}],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]}]}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Label Left', '\\begin{prooftree}\\AxiomC{A}\\LeftLabel{L}\\UnaryInfC{B}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 0,
         "attributes": {"semantics": "bspr_labelledRule:left;bspr_inference:1;bspr_proof:true"},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"bspr_labelledRule": "left",
                        "bspr_inference": 1,
                        "bspr_proof": true},
         "childNodes": [
           {"kind": "mpadded",
            "texClass": 0,
            "attributes": {"height": "+.5em",
                           "width": "+.5em",
                           "voffset": "-.15em",
                           "semantics": "bspr_prooflabel:left"},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"bspr_prooflabel": "left"},
            "childNodes": [
              {"kind": "mrow",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mstyle",
                  "texClass": 0,
                  "attributes": {"displaystyle": false,
                                 "scriptlevel": 0},
                  "inherited": {},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mtext",
                        "texClass": 0,
                        "attributes": {},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "text",
                           "text": "L"}],
                        "isSpacelike": true}],
                     "isInferred": true,
                     "isSpacelike": true}],
                  "isSpacelike": true}],
               "isInferred": true,
               "isSpacelike": true}],
            "isSpacelike": true},
           {"kind": "mtable",
            "texClass": 0,
            "attributes": {"align": "top 2",
                           "rowlines": "solid",
                           "framespacing": "0 0",
                           "semantics": "bspr_inferenceRule:down"},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"useHeight": 1,
                           "bspr_inferenceRule": "down"},
            "childNodes": [
              {"kind": "mtr",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": false,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                                "rowalign": "baseline",
                                "displaystyle": false,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mtable",
                        "texClass": 0,
                        "attributes": {"framespacing": "0 0"},
                              "inherited": {"columnalign": "center",
                                "rowalign": "baseline",
                                "displaystyle": false,
                                "scriptlevel": 0},
                              "properties": {"useHeight": 1},
                              "childNodes": [
                                {"kind": "mtr",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mtd",
                                      "texClass": null,
                                      "attributes": {"rowalign": "bottom"},
                                      "inherited": {"columnalign": "center",
                                        "rowalign": "baseline",
                                        "displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mstyle",
                                              "texClass": 0,
                                              "attributes": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "inherited": {},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mtext",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 0},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "A"}],
                                                      "isSpacelike": true}],
                                                  "isInferred": true,
                                                  "isSpacelike": true}],
                                              "isSpacelike": true}],
                                          "isInferred": true,
                                          "isSpacelike": true}]}]}]}],
                          "isInferred": true}]}]},
                {"kind": "mtr",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtd",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"columnalign": "center",
                        "rowalign": "baseline",
                        "displaystyle": false,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": false,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mstyle",
                              "texClass": 0,
                              "attributes": {"displaystyle": false,
                                "scriptlevel": 0},
                              "inherited": {},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mtext",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "text",
                                          "text": "B"}],
                                      "isSpacelike": true}],
                                  "isInferred": true,
                                  "isSpacelike": true}],
                              "isSpacelike": true}],
                          "isInferred": true,
                          "isSpacelike": true}]}]}]}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Label Right', '\\begin{prooftree}\\AxiomC{A}\\RightLabel{R}\\UnaryInfC{B}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 0,
         "attributes": {"semantics": "bspr_labelledRule:right;bspr_inference:1;bspr_proof:true"},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"bspr_labelledRule": "right",
                        "bspr_inference": 1,
                        "bspr_proof": true},
         "childNodes": [
           {"kind": "mtable",
            "texClass": 0,
            "attributes": {"align": "top 2",
                           "rowlines": "solid",
                           "framespacing": "0 0",
                           "semantics": "bspr_inferenceRule:down"},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"useHeight": 1,
                           "bspr_inferenceRule": "down"},
            "childNodes": [
              {"kind": "mtr",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": false,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                                "rowalign": "baseline",
                                "displaystyle": false,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mtable",
                        "texClass": 0,
                        "attributes": {"framespacing": "0 0"},
                        "inherited": {"columnalign": "center",
                                      "rowalign": "baseline",
                                      "displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {"useHeight": 1},
                        "childNodes": [
                          {"kind": "mtr",
                           "texClass": null,
                           "attributes": {},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mtd",
                              "texClass": null,
                              "attributes": {"rowalign": "bottom"},
                              "inherited": {"columnalign": "center",
                                            "rowalign": "baseline",
                                            "displaystyle": false,
                                            "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                 "texClass": 0,
                                 "attributes": {},
                                 "inherited": {"displaystyle": false,
                                               "scriptlevel": 0},
                                 "properties": {},
                                 "childNodes": [
                                   {"kind": "mstyle",
                                    "texClass": 0,
                                    "attributes": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "inherited": {},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mtext",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 0},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "A"}],
                                                      "isSpacelike": true}],
                                                  "isInferred": true,
                                                  "isSpacelike": true}],
                                              "isSpacelike": true}],
                                          "isInferred": true,
                                          "isSpacelike": true}]}]}]}],
                          "isInferred": true}]}]},
                {"kind": "mtr",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtd",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"columnalign": "center",
                        "rowalign": "baseline",
                        "displaystyle": false,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": false,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mstyle",
                              "texClass": 0,
                              "attributes": {"displaystyle": false,
                                "scriptlevel": 0},
                              "inherited": {},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mtext",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "text",
                                          "text": "B"}],
                                      "isSpacelike": true}],
                                  "isInferred": true,
                                  "isSpacelike": true}],
                              "isSpacelike": true}],
                          "isInferred": true,
                          "isSpacelike": true}]}]}]},
            {"kind": "mpadded",
              "texClass": 0,
              "attributes": {"height": "+.5em",
                "width": "+.5em",
                "voffset": "-.15em",
                "semantics": "bspr_prooflabel:right"},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"bspr_prooflabel": "right"},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mstyle",
                      "texClass": 0,
                      "attributes": {"displaystyle": false,
                        "scriptlevel": 0},
                      "inherited": {},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": false,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mtext",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "R"}],
                              "isSpacelike": true}],
                          "isInferred": true,
                          "isSpacelike": true}],
                      "isSpacelike": true}],
                  "isInferred": true,
                  "isSpacelike": true}],
              "isSpacelike": true}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Label Both', '\\begin{prooftree}\\AxiomC{A}\\LeftLabel{L}\\RightLabel{R}\\UnaryInfC{B}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 0,
         "attributes": {"semantics": "bspr_labelledRule:both;bspr_inference:1;bspr_proof:true"},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"bspr_labelledRule": "both",
                        "bspr_inference": 1,
                        "bspr_proof": true},
         "childNodes": [
           {"kind": "mpadded",
            "texClass": 0,
            "attributes": {"height": "+.5em",
                           "width": "+.5em",
                           "voffset": "-.15em",
                           "semantics": "bspr_prooflabel:left"},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"bspr_prooflabel": "left"},
            "childNodes": [
              {"kind": "mrow",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mstyle",
                  "texClass": 0,
                  "attributes": {"displaystyle": false,
                                 "scriptlevel": 0},
                  "inherited": {},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mtext",
                        "texClass": 0,
                        "attributes": {},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "text",
                           "text": "L"}],
                        "isSpacelike": true}],
                     "isInferred": true,
                     "isSpacelike": true}],
                  "isSpacelike": true}],
               "isInferred": true,
               "isSpacelike": true}],
            "isSpacelike": true},
           {"kind": "mtable",
            "texClass": 0,
            "attributes": {"align": "top 2",
                           "rowlines": "solid",
                           "framespacing": "0 0",
                           "semantics": "bspr_inferenceRule:down"},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"useHeight": 1,
                           "bspr_inferenceRule": "down"},
            "childNodes": [
              {"kind": "mtr",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": false,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                                "rowalign": "baseline",
                                "displaystyle": false,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mtable",
                        "texClass": 0,
                        "attributes": {"framespacing": "0 0"},
                        "inherited": {"columnalign": "center",
                                      "rowalign": "baseline",
                                      "displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {"useHeight": 1},
                        "childNodes": [
                          {"kind": "mtr",
                           "texClass": null,
                           "attributes": {},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mtd",
                                      "texClass": null,
                                      "attributes": {"rowalign": "bottom"},
                                      "inherited": {"columnalign": "center",
                                        "rowalign": "baseline",
                                        "displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mstyle",
                                              "texClass": 0,
                                              "attributes": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "inherited": {},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mtext",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 0},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "A"}],
                                                      "isSpacelike": true}],
                                                  "isInferred": true,
                                                  "isSpacelike": true}],
                                              "isSpacelike": true}],
                                          "isInferred": true,
                                          "isSpacelike": true}]}]}]}],
                          "isInferred": true}]}]},
                {"kind": "mtr",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtd",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"columnalign": "center",
                        "rowalign": "baseline",
                        "displaystyle": false,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": false,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mstyle",
                              "texClass": 0,
                              "attributes": {"displaystyle": false,
                                "scriptlevel": 0},
                              "inherited": {},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mtext",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "text",
                                          "text": "B"}],
                                      "isSpacelike": true}],
                                  "isInferred": true,
                                  "isSpacelike": true}],
                              "isSpacelike": true}],
                          "isInferred": true,
                          "isSpacelike": true}]}]}]},
            {"kind": "mpadded",
              "texClass": 0,
              "attributes": {"height": "+.5em",
                "width": "+.5em",
                "voffset": "-.15em",
                "semantics": "bspr_prooflabel:right"},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"bspr_prooflabel": "right"},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mstyle",
                      "texClass": 0,
                      "attributes": {"displaystyle": false,
                        "scriptlevel": 0},
                      "inherited": {},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": false,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mtext",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "R"}],
                              "isSpacelike": true}],
                          "isInferred": true,
                          "isSpacelike": true}],
                      "isSpacelike": true}],
                  "isInferred": true,
                  "isSpacelike": true}],
              "isSpacelike": true}]}],
      "isInferred": true}]}
);


// Abbreviations
parserTest.runTest(
  'Single Axiom Abbr', '\\begin{prooftree}\\AXC{A}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mstyle",
         "texClass": 0,
         "attributes": {"displaystyle": false,
                        "scriptlevel": 0,
                        "semantics": "bspr_proof:true"},
         "inherited": {},
         "properties": {"bspr_proof": true},
         "childNodes": [
           {"kind": "mrow",
            "texClass": 0,
            "attributes": {},
            "inherited": {"displaystyle": false,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
                {"kind": "mtext",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "text",
                      "text": "A"}],
                  "isSpacelike": true}],
              "isInferred": true,
              "isSpacelike": true}],
          "isSpacelike": true}],
      "isInferred": true,
      "isSpacelike": true}],
  "isSpacelike": true}
);

parserTest.runTest(
  'Unary Inference Abbr', '\\begin{prooftree}\\AXC{A}\\UIC{B}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"align": "top 2",
                        "rowlines": "solid",
                        "framespacing": "0 0",
                        "semantics": "bspr_inferenceRule:down;bspr_inference:1;bspr_proof:true"},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"useHeight": 1,
                        "bspr_inferenceRule": "down",
                        "bspr_inference": 1,
                        "bspr_proof": true},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": false,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": false,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtable",
                     "texClass": 0,
                     "attributes": {"framespacing": "0 0"},
                     "inherited": {"columnalign": "center",
                                   "rowalign": "baseline",
                                   "displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {"useHeight": 1},
                     "childNodes": [
                       {"kind": "mtr",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"columnalign": "center",
                                      "rowalign": "baseline",
                                      "displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {"rowalign": "bottom"},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                              "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mstyle",
                                          "texClass": 0,
                                          "attributes": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "inherited": {},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mrow",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "A"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]}]}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": false,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": false,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mstyle",
                          "texClass": 0,
                          "attributes": {"displaystyle": false,
                            "scriptlevel": 0},
                          "inherited": {},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mtext",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "text",
                                      "text": "B"}],
                                  "isSpacelike": true}],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Binary Inference Abbr', '\\begin{prooftree}\\AXC{A}\\AXC{B}\\BIC{C}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"align": "top 2",
                        "rowlines": "solid",
                        "framespacing": "0 0",
                        "semantics": "bspr_inferenceRule:down;bspr_inference:2;bspr_proof:true"},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"useHeight": 1,
                        "bspr_inferenceRule": "down",
                        "bspr_inference": 2,
                        "bspr_proof": true},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": false,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": false,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtable",
                     "texClass": 0,
                     "attributes": {"framespacing": "0 0"},
                     "inherited": {"columnalign": "center",
                                   "rowalign": "baseline",
                                   "displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {"useHeight": 1},
                     "childNodes": [
                       {"kind": "mtr",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"columnalign": "center",
                                      "rowalign": "baseline",
                                      "displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {"rowalign": "bottom"},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mstyle",
                                 "texClass": 0,
                                 "attributes": {"displaystyle": false,
                                                "scriptlevel": 0},
                                 "inherited": {},
                                 "properties": {},
                                 "childNodes": [
                                   {"kind": "mrow",
                                    "texClass": 0,
                                    "attributes": {},
                                    "inherited": {"displaystyle": false,
                                                  "scriptlevel": 0},
                                    "properties": {},
                                    "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "A"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": null,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {"rowalign": "bottom"},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mstyle",
                                          "texClass": 0,
                                          "attributes": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "inherited": {},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mrow",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "B"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]}]}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": false,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": false,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mstyle",
                          "texClass": 0,
                          "attributes": {"displaystyle": false,
                            "scriptlevel": 0},
                          "inherited": {},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mtext",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "text",
                                      "text": "C"}],
                                  "isSpacelike": true}],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Trinary Inference Abbr', '\\begin{prooftree}\\AXC{A}\\AXC{B}\\AXC{C}\\TIC{D}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mtable",
         "texClass": 0,
         "attributes": {"align": "top 2",
                        "rowlines": "solid",
                        "framespacing": "0 0",
                        "semantics": "bspr_inferenceRule:down;bspr_inference:3;bspr_proof:true"},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"useHeight": 1,
                        "bspr_inferenceRule": "down",
                        "bspr_inference": 3,
                        "bspr_proof": true},
         "childNodes": [
           {"kind": "mtr",
            "texClass": null,
            "attributes": {},
            "inherited": {"columnalign": "center",
                          "rowalign": "baseline",
                          "displaystyle": false,
                          "scriptlevel": 0},
            "properties": {},
            "childNodes": [
              {"kind": "mtd",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": false,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtable",
                     "texClass": 0,
                     "attributes": {"framespacing": "0 0"},
                     "inherited": {"columnalign": "center",
                                   "rowalign": "baseline",
                                   "displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {"useHeight": 1},
                     "childNodes": [
                       {"kind": "mtr",
                        "texClass": null,
                        "attributes": {},
                        "inherited": {"columnalign": "center",
                                      "rowalign": "baseline",
                                      "displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {"rowalign": "bottom"},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                            "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mstyle",
                                 "texClass": 0,
                                 "attributes": {"displaystyle": false,
                                                "scriptlevel": 0},
                                 "inherited": {},
                                 "properties": {},
                                 "childNodes": [
                                   {"kind": "mrow",
                                    "texClass": 0,
                                    "attributes": {},
                                    "inherited": {"displaystyle": false,
                                                  "scriptlevel": 0},
                                    "properties": {},
                                    "childNodes": [
                                      {"kind": "mtext",
                                       "texClass": 0,
                                       "attributes": {},
                                       "inherited": {"displaystyle": false,
                                                     "scriptlevel": 0},
                                       "properties": {},
                                       "childNodes": [
                                         {"kind": "text",
                                          "text": "A"}],
                                       "isSpacelike": true}],
                                    "isInferred": true,
                                    "isSpacelike": true}],
                                 "isSpacelike": true}],
                              "isInferred": true,
                              "isSpacelike": true}]},
                          {"kind": "mtd",
                           "texClass": null,
                           "attributes": {},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": null,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {"rowalign": "bottom"},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mstyle",
                                          "texClass": 0,
                                          "attributes": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "inherited": {},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mrow",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "B"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": null,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [],
                                      "isInferred": true,
                                      "isSpacelike": true}]},
                                {"kind": "mtd",
                                  "texClass": null,
                                  "attributes": {"rowalign": "bottom"},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mrow",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mstyle",
                                          "texClass": 0,
                                          "attributes": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "inherited": {},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mrow",
                                              "texClass": 0,
                                              "attributes": {},
                                              "inherited": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mtext",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "text",
                                                      "text": "C"}],
                                                  "isSpacelike": true}],
                                              "isInferred": true,
                                              "isSpacelike": true}],
                                          "isSpacelike": true}],
                                      "isInferred": true,
                                      "isSpacelike": true}]}]}]}],
                      "isInferred": true}]}]},
            {"kind": "mtr",
              "texClass": null,
              "attributes": {},
              "inherited": {"columnalign": "center",
                "rowalign": "baseline",
                "displaystyle": false,
                "scriptlevel": 0},
              "properties": {},
              "childNodes": [
                {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                      "texClass": 0,
                      "attributes": {},
                      "inherited": {"displaystyle": false,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mstyle",
                          "texClass": 0,
                          "attributes": {"displaystyle": false,
                            "scriptlevel": 0},
                          "inherited": {},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mrow",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mtext",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "text",
                                      "text": "D"}],
                                  "isSpacelike": true}],
                              "isInferred": true,
                              "isSpacelike": true}],
                          "isSpacelike": true}],
                      "isInferred": true,
                      "isSpacelike": true}]}]}]}],
      "isInferred": true}]}
);

parserTest.runTest(
  'Label Left Abbr', '\\begin{prooftree}\\AXC{A}\\LeftLabel{L}\\UIC{B}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 0,
         "attributes": {"semantics": "bspr_labelledRule:left;bspr_inference:1;bspr_proof:true"},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"bspr_labelledRule": "left",
                        "bspr_inference": 1,
                        "bspr_proof": true},
         "childNodes": [
           {"kind": "mpadded",
            "texClass": 0,
            "attributes": {"height": "+.5em",
                           "width": "+.5em",
                           "voffset": "-.15em",
                           "semantics": "bspr_prooflabel:left"},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"bspr_prooflabel": "left"},
            "childNodes": [
              {"kind": "mrow",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mstyle",
                  "texClass": 0,
                  "attributes": {"displaystyle": false,
                                 "scriptlevel": 0},
                  "inherited": {},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mtext",
                        "texClass": 0,
                        "attributes": {},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "text",
                           "text": "L"}],
                        "isSpacelike": true}],
                     "isInferred": true,
                     "isSpacelike": true}],
                  "isSpacelike": true}],
               "isInferred": true,
               "isSpacelike": true}],
            "isSpacelike": true},
           {"kind": "mtable",
            "texClass": 0,
            "attributes": {"align": "top 2",
                           "rowlines": "solid",
                           "framespacing": "0 0",
                           "semantics": "bspr_inferenceRule:down"},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"useHeight": 1,
                           "bspr_inferenceRule": "down"},
            "childNodes": [
              {"kind": "mtr",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": false,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                                "rowalign": "baseline",
                                "displaystyle": false,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mtable",
                        "texClass": 0,
                        "attributes": {"framespacing": "0 0"},
                              "inherited": {"columnalign": "center",
                                "rowalign": "baseline",
                                "displaystyle": false,
                                "scriptlevel": 0},
                              "properties": {"useHeight": 1},
                              "childNodes": [
                                {"kind": "mtr",
                                  "texClass": null,
                                  "attributes": {},
                                  "inherited": {"columnalign": "center",
                                    "rowalign": "baseline",
                                    "displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mtd",
                                      "texClass": null,
                                      "attributes": {"rowalign": "bottom"},
                                      "inherited": {"columnalign": "center",
                                        "rowalign": "baseline",
                                        "displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mstyle",
                                              "texClass": 0,
                                              "attributes": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "inherited": {},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mtext",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 0},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "A"}],
                                                      "isSpacelike": true}],
                                                  "isInferred": true,
                                                  "isSpacelike": true}],
                                              "isSpacelike": true}],
                                          "isInferred": true,
                                          "isSpacelike": true}]}]}]}],
                          "isInferred": true}]}]},
                {"kind": "mtr",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtd",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"columnalign": "center",
                        "rowalign": "baseline",
                        "displaystyle": false,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": false,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mstyle",
                              "texClass": 0,
                              "attributes": {"displaystyle": false,
                                "scriptlevel": 0},
                              "inherited": {},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mtext",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "text",
                                          "text": "B"}],
                                      "isSpacelike": true}],
                                  "isInferred": true,
                                  "isSpacelike": true}],
                              "isSpacelike": true}],
                          "isInferred": true,
                          "isSpacelike": true}]}]}]}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Label Right Abbr', '\\begin{prooftree}\\AXC{A}\\RightLabel{R}\\UIC{B}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 0,
         "attributes": {"semantics": "bspr_labelledRule:right;bspr_inference:1;bspr_proof:true"},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"bspr_labelledRule": "right",
                        "bspr_inference": 1,
                        "bspr_proof": true},
         "childNodes": [
           {"kind": "mtable",
            "texClass": 0,
            "attributes": {"align": "top 2",
                           "rowlines": "solid",
                           "framespacing": "0 0",
                           "semantics": "bspr_inferenceRule:down"},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"useHeight": 1,
                           "bspr_inferenceRule": "down"},
            "childNodes": [
              {"kind": "mtr",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": false,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                                "rowalign": "baseline",
                                "displaystyle": false,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mtable",
                        "texClass": 0,
                        "attributes": {"framespacing": "0 0"},
                        "inherited": {"columnalign": "center",
                                      "rowalign": "baseline",
                                      "displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {"useHeight": 1},
                        "childNodes": [
                          {"kind": "mtr",
                           "texClass": null,
                           "attributes": {},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mtd",
                              "texClass": null,
                              "attributes": {"rowalign": "bottom"},
                              "inherited": {"columnalign": "center",
                                            "rowalign": "baseline",
                                            "displaystyle": false,
                                            "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                 "texClass": 0,
                                 "attributes": {},
                                 "inherited": {"displaystyle": false,
                                               "scriptlevel": 0},
                                 "properties": {},
                                 "childNodes": [
                                   {"kind": "mstyle",
                                    "texClass": 0,
                                    "attributes": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "inherited": {},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mtext",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 0},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "A"}],
                                                      "isSpacelike": true}],
                                                  "isInferred": true,
                                                  "isSpacelike": true}],
                                              "isSpacelike": true}],
                                          "isInferred": true,
                                          "isSpacelike": true}]}]}]}],
                          "isInferred": true}]}]},
                {"kind": "mtr",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtd",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"columnalign": "center",
                        "rowalign": "baseline",
                        "displaystyle": false,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": false,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mstyle",
                              "texClass": 0,
                              "attributes": {"displaystyle": false,
                                "scriptlevel": 0},
                              "inherited": {},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mtext",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "text",
                                          "text": "B"}],
                                      "isSpacelike": true}],
                                  "isInferred": true,
                                  "isSpacelike": true}],
                              "isSpacelike": true}],
                          "isInferred": true,
                          "isSpacelike": true}]}]}]},
            {"kind": "mpadded",
              "texClass": 0,
              "attributes": {"height": "+.5em",
                "width": "+.5em",
                "voffset": "-.15em",
                "semantics": "bspr_prooflabel:right"},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"bspr_prooflabel": "right"},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mstyle",
                      "texClass": 0,
                      "attributes": {"displaystyle": false,
                        "scriptlevel": 0},
                      "inherited": {},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": false,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mtext",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "R"}],
                              "isSpacelike": true}],
                          "isInferred": true,
                          "isSpacelike": true}],
                      "isSpacelike": true}],
                  "isInferred": true,
                  "isSpacelike": true}],
              "isSpacelike": true}]}],
      "isInferred": true}]}
);


parserTest.runTest(
  'Label Both Abbr', '\\begin{prooftree}\\AXC{A}\\LeftLabel{L}\\RightLabel{R}\\UIC{B}\\end{prooftree}',
  {"kind": "math",
   "texClass": 0,
   "attributes": {"display": "block"},
   "inherited": {"displaystyle": true,
                 "scriptlevel": 0},
   "properties": {},
   "childNodes": [
     {"kind": "mrow",
      "texClass": 0,
      "attributes": {},
      "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
      "properties": {},
      "childNodes": [
        {"kind": "mrow",
         "texClass": 0,
         "attributes": {"semantics": "bspr_labelledRule:both;bspr_inference:1;bspr_proof:true"},
         "inherited": {"displaystyle": true,
                       "scriptlevel": 0},
         "properties": {"bspr_labelledRule": "both",
                        "bspr_inference": 1,
                        "bspr_proof": true},
         "childNodes": [
           {"kind": "mpadded",
            "texClass": 0,
            "attributes": {"height": "+.5em",
                           "width": "+.5em",
                           "voffset": "-.15em",
                           "semantics": "bspr_prooflabel:left"},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"bspr_prooflabel": "left"},
            "childNodes": [
              {"kind": "mrow",
               "texClass": 0,
               "attributes": {},
               "inherited": {"displaystyle": true,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mstyle",
                  "texClass": 0,
                  "attributes": {"displaystyle": false,
                                 "scriptlevel": 0},
                  "inherited": {},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mtext",
                        "texClass": 0,
                        "attributes": {},
                        "inherited": {"displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {},
                        "childNodes": [
                          {"kind": "text",
                           "text": "L"}],
                        "isSpacelike": true}],
                     "isInferred": true,
                     "isSpacelike": true}],
                  "isSpacelike": true}],
               "isInferred": true,
               "isSpacelike": true}],
            "isSpacelike": true},
           {"kind": "mtable",
            "texClass": 0,
            "attributes": {"align": "top 2",
                           "rowlines": "solid",
                           "framespacing": "0 0",
                           "semantics": "bspr_inferenceRule:down"},
            "inherited": {"displaystyle": true,
                          "scriptlevel": 0},
            "properties": {"useHeight": 1,
                           "bspr_inferenceRule": "down"},
            "childNodes": [
              {"kind": "mtr",
               "texClass": null,
               "attributes": {},
               "inherited": {"columnalign": "center",
                             "rowalign": "baseline",
                             "displaystyle": false,
                             "scriptlevel": 0},
               "properties": {},
               "childNodes": [
                 {"kind": "mtd",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                                "rowalign": "baseline",
                                "displaystyle": false,
                                "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mrow",
                     "texClass": 0,
                     "attributes": {},
                     "inherited": {"displaystyle": false,
                                   "scriptlevel": 0},
                     "properties": {},
                     "childNodes": [
                       {"kind": "mtable",
                        "texClass": 0,
                        "attributes": {"framespacing": "0 0"},
                        "inherited": {"columnalign": "center",
                                      "rowalign": "baseline",
                                      "displaystyle": false,
                                      "scriptlevel": 0},
                        "properties": {"useHeight": 1},
                        "childNodes": [
                          {"kind": "mtr",
                           "texClass": null,
                           "attributes": {},
                           "inherited": {"columnalign": "center",
                                         "rowalign": "baseline",
                                         "displaystyle": false,
                                         "scriptlevel": 0},
                           "properties": {},
                           "childNodes": [
                             {"kind": "mtd",
                                      "texClass": null,
                                      "attributes": {"rowalign": "bottom"},
                                      "inherited": {"columnalign": "center",
                                        "rowalign": "baseline",
                                        "displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "mrow",
                                          "texClass": 0,
                                          "attributes": {},
                                          "inherited": {"displaystyle": false,
                                            "scriptlevel": 0},
                                          "properties": {},
                                          "childNodes": [
                                            {"kind": "mstyle",
                                              "texClass": 0,
                                              "attributes": {"displaystyle": false,
                                                "scriptlevel": 0},
                                              "inherited": {},
                                              "properties": {},
                                              "childNodes": [
                                                {"kind": "mrow",
                                                  "texClass": 0,
                                                  "attributes": {},
                                                  "inherited": {"displaystyle": false,
                                                    "scriptlevel": 0},
                                                  "properties": {},
                                                  "childNodes": [
                                                    {"kind": "mtext",
                                                      "texClass": 0,
                                                      "attributes": {},
                                                      "inherited": {"displaystyle": false,
                                                        "scriptlevel": 0},
                                                      "properties": {},
                                                      "childNodes": [
                                                        {"kind": "text",
                                                          "text": "A"}],
                                                      "isSpacelike": true}],
                                                  "isInferred": true,
                                                  "isSpacelike": true}],
                                              "isSpacelike": true}],
                                          "isInferred": true,
                                          "isSpacelike": true}]}]}]}],
                          "isInferred": true}]}]},
                {"kind": "mtr",
                  "texClass": null,
                  "attributes": {},
                  "inherited": {"columnalign": "center",
                    "rowalign": "baseline",
                    "displaystyle": false,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mtd",
                      "texClass": null,
                      "attributes": {},
                      "inherited": {"columnalign": "center",
                        "rowalign": "baseline",
                        "displaystyle": false,
                        "scriptlevel": 0},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": false,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mstyle",
                              "texClass": 0,
                              "attributes": {"displaystyle": false,
                                "scriptlevel": 0},
                              "inherited": {},
                              "properties": {},
                              "childNodes": [
                                {"kind": "mrow",
                                  "texClass": 0,
                                  "attributes": {},
                                  "inherited": {"displaystyle": false,
                                    "scriptlevel": 0},
                                  "properties": {},
                                  "childNodes": [
                                    {"kind": "mtext",
                                      "texClass": 0,
                                      "attributes": {},
                                      "inherited": {"displaystyle": false,
                                        "scriptlevel": 0},
                                      "properties": {},
                                      "childNodes": [
                                        {"kind": "text",
                                          "text": "B"}],
                                      "isSpacelike": true}],
                                  "isInferred": true,
                                  "isSpacelike": true}],
                              "isSpacelike": true}],
                          "isInferred": true,
                          "isSpacelike": true}]}]}]},
            {"kind": "mpadded",
              "texClass": 0,
              "attributes": {"height": "+.5em",
                "width": "+.5em",
                "voffset": "-.15em",
                "semantics": "bspr_prooflabel:right"},
              "inherited": {"displaystyle": true,
                "scriptlevel": 0},
              "properties": {"bspr_prooflabel": "right"},
              "childNodes": [
                {"kind": "mrow",
                  "texClass": 0,
                  "attributes": {},
                  "inherited": {"displaystyle": true,
                    "scriptlevel": 0},
                  "properties": {},
                  "childNodes": [
                    {"kind": "mstyle",
                      "texClass": 0,
                      "attributes": {"displaystyle": false,
                        "scriptlevel": 0},
                      "inherited": {},
                      "properties": {},
                      "childNodes": [
                        {"kind": "mrow",
                          "texClass": 0,
                          "attributes": {},
                          "inherited": {"displaystyle": false,
                            "scriptlevel": 0},
                          "properties": {},
                          "childNodes": [
                            {"kind": "mtext",
                              "texClass": 0,
                              "attributes": {},
                              "inherited": {"displaystyle": false,
                                "scriptlevel": 0},
                              "properties": {},
                              "childNodes": [
                                {"kind": "text",
                                  "text": "R"}],
                              "isSpacelike": true}],
                          "isInferred": true,
                          "isSpacelike": true}],
                      "isSpacelike": true}],
                  "isInferred": true,
                  "isSpacelike": true}],
              "isSpacelike": true}]}],
      "isInferred": true}]}
);
